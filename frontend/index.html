<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chat Hook - Private Chat</title>

  <!-- Socket.IO CDN -->
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <!-- Three.js CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

  <style>
    /* Base styles and futuristic dark theme */
    :root {
      --primary: #0cf;
      --secondary: #8a2be2;
      --accent: #00ff88;
      --dark-bg: #0a0a12;
      --darker-bg: #050508;
      --card-bg: rgba(20, 20, 30, 0.8);
      --text: #e0e0ff;
      --text-muted: #a0a0c0;
      --success: #00ff88;
      --danger: #ff4d6d;
      --warning: #ffaa00;
      --info: #0cf;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: var(--dark-bg);
      color: var(--text);
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }

    /* Animation containers - all hidden by default */
    .animation-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
      display: none;
    }

    /* ===== FIXED USER AVATAR STYLES ===== */
    .user-avatar {
      width: 45px !important;
      height: 45px !important;
      border-radius: 50% !important;
      background: linear-gradient(135deg, var(--primary), var(--secondary)) !important;
      color: white !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      font-weight: bold !important;
      font-size: 20px !important;
      border: 2px solid var(--accent) !important;
      box-shadow: 0 0 15px rgba(0, 255, 136, 0.3) !important;
      overflow: hidden !important;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .user-avatar:hover {
      transform: scale(1.05);
      box-shadow: 0 0 25px rgba(0, 255, 136, 0.6);
    }

    .user-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* Message user avatar fix */
    .message .user-avatar {
      width: 30px !important;
      height: 30px !important;
      font-size: 14px !important;
      margin-right: 10px !important;
      border-width: 1px !important;
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .message .user-avatar:hover {
      transform: scale(1.1);
    }

    /* Profile Picture Upload Styles */
    .profile-pic-upload {
      position: relative;
      width: 120px;
      height: 120px;
      margin: 0 auto 20px;
      cursor: pointer;
    }

    .profile-pic-preview {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      display: flex;
      align-items: center;
      justify-content: center;
      border: 4px solid var(--accent);
      box-shadow: 0 0 30px rgba(0, 255, 136, 0.5);
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .profile-pic-preview:hover {
      transform: scale(1.05);
      box-shadow: 0 0 40px rgba(0, 255, 136, 0.8);
    }

    .profile-pic-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .profile-pic-preview span {
      font-size: 48px;
      font-weight: bold;
      color: white;
    }

    .upload-overlay {
      position: absolute;
      bottom: 0;
      right: 0;
      width: 35px;
      height: 35px;
      background: var(--accent);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--dark-bg);
      font-size: 18px;
      border: 2px solid var(--primary);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .upload-overlay:hover {
      transform: scale(1.1);
      background: var(--primary);
      color: white;
    }

    #profile-pic-input {
      display: none;
    }

    /* Verified badge */
    .verified-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 18px;
      height: 18px;
      background: var(--primary);
      border-radius: 50%;
      margin-left: 5px;
      font-size: 10px;
      color: var(--dark-bg);
      box-shadow: 0 0 10px var(--primary);
    }

    /* Grid Scan Animation */
    #grid-scan-animation {
      background: linear-gradient(135deg, #0a0a12 0%, #1a1a2e 100%);
    }

    .grid-scan-canvas-container {
      width: 100%;
      height: 100%;
      position: relative;
    }

    .grid-scan-canvas-container canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    /* Quantum Wave Animation */
    #quantum-wave-animation {
      background: linear-gradient(135deg, #0a0a12 0%, #1a1a2e 100%);
    }

    .quantum-particle {
      position: absolute;
      width: 4px;
      height: 4px;
      border-radius: 50%;
      background: var(--primary);
      box-shadow: 0 0 10px var(--primary);
      animation: quantum-wave 8s infinite ease-in-out;
    }

    @keyframes quantum-wave {
      0%, 100% {
        transform: translate(0, 0) scale(1);
        opacity: 0.3;
      }
      25% {
        transform: translate(100px, -50px) scale(1.5);
        opacity: 0.8;
      }
      50% {
        transform: translate(-50px, 100px) scale(0.8);
        opacity: 0.5;
      }
      75% {
        transform: translate(-100px, -100px) scale(1.2);
        opacity: 0.7;
      }
    }

    /* Cyber Grid Animation */
    #cyber-grid-animation {
      background: linear-gradient(45deg, #000428, #004e92);
    }

    .cyber-line {
      position: absolute;
      background: rgba(0, 204, 255, 0.3);
      box-shadow: 0 0 10px rgba(0, 204, 255, 0.5);
      animation: cyber-pulse 3s infinite ease-in-out;
    }

    .cyber-line.horizontal {
      width: 100%;
      height: 1px;
      animation: cyber-pulse 3s infinite ease-in-out;
    }

    .cyber-line.vertical {
      height: 100%;
      width: 1px;
      animation: cyber-pulse 3s infinite ease-in-out;
    }

    @keyframes cyber-pulse {
      0%, 100% {
        opacity: 0.2;
      }
      50% {
        opacity: 0.8;
      }
    }

    /* Aurora Borealis Animation */
    #aurora-animation {
      background: linear-gradient(45deg, #0f2027, #203a43, #2c5364);
    }

    .aurora-layer {
      position: absolute;
      width: 100%;
      height: 100%;
      opacity: 0.7;
      mix-blend-mode: screen;
      animation: aurora-drift 15s infinite linear;
    }

    .aurora-layer:nth-child(1) {
      background: linear-gradient(45deg, #ff0080, #8000ff);
      animation-delay: 0s;
    }

    .aurora-layer:nth-child(2) {
      background: linear-gradient(45deg, #0080ff, #00ff80);
      animation-delay: -5s;
    }

    .aurora-layer:nth-child(3) {
      background: linear-gradient(45deg, #ff8000, #ff0080);
      animation-delay: -10s;
    }

    @keyframes aurora-drift {
      0% {
        transform: translateX(-10%) skewX(-10deg);
      }
      50% {
        transform: translateX(10%) skewX(10deg);
      }
      100% {
        transform: translateX(-10%) skewX(-10deg);
      }
    }

    /* Matrix Code Animation */
    #matrix-animation {
      background: #000;
    }

    .matrix-column {
      position: absolute;
      top: -100px;
      color: #0f0;
      font-family: monospace;
      font-size: 18px;
      animation: matrix-fall linear infinite;
      text-shadow: 0 0 5px #0f0;
    }

    @keyframes matrix-fall {
      0% {
        transform: translateY(-100px);
        opacity: 0;
      }
      5% {
        opacity: 1;
      }
      95% {
        opacity: 1;
      }
      100% {
        transform: translateY(100vh);
        opacity: 0;
      }
    }

    /* Fireworks Animation */
    #fireworks-animation {
      background: #000;
    }

    .firework {
      position: absolute;
      width: 5px;
      height: 5px;
      border-radius: 50%;
      animation: firework-launch 3s infinite ease-out;
    }

    .firework-particle {
      position: absolute;
      width: 3px;
      height: 3px;
      border-radius: 50%;
      animation: firework-explode 1.5s infinite ease-out;
    }

    @keyframes firework-launch {
      0% {
        transform: translateY(100vh) scale(0);
        opacity: 0;
      }
      50% {
        opacity: 1;
      }
      100% {
        transform: translateY(0) scale(1);
        opacity: 0;
      }
    }

    @keyframes firework-explode {
      0% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
      }
      100% {
        transform: translate(var(--tx), var(--ty)) scale(0);
        opacity: 0;
      }
    }

    /* Bubble Universe Animation */
    #bubble-universe-animation {
      background: radial-gradient(circle at center, #0a0a12 0%, #1a1a2e 70%);
    }

    .bubble {
      position: absolute;
      border-radius: 50%;
      border: 1px solid rgba(255, 255, 255, 0.3);
      animation: bubble-float 15s infinite ease-in-out;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.1), transparent);
    }

    @keyframes bubble-float {
      0%, 100% {
        transform: translate(0, 0) scale(1);
      }
      25% {
        transform: translate(100px, -50px) scale(1.2);
      }
      50% {
        transform: translate(-50px, 100px) scale(0.8);
      }
      75% {
        transform: translate(-100px, -100px) scale(1.1);
      }
    }

    /* Geometric Fractal Animation */
    #fractal-animation {
      background: linear-gradient(135deg, #0a0a12 0%, #1a1a2e 100%);
    }

    .fractal-shape {
      position: absolute;
      opacity: 0.1;
      animation: fractal-rotate 20s infinite linear;
    }

    .fractal-shape:nth-child(1) {
      width: 200px;
      height: 200px;
      background: conic-gradient(from 0deg, #0cf, #8a2be2, #00ff88, #0cf);
      top: 10%;
      left: 10%;
      clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
    }

    .fractal-shape:nth-child(2) {
      width: 150px;
      height: 150px;
      background: conic-gradient(from 45deg, #ff6b6b, #feca57, #48dbfb, #ff6b6b);
      top: 60%;
      left: 70%;
      clip-path: polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%);
    }

    .fractal-shape:nth-child(3) {
      width: 180px;
      height: 180px;
      background: conic-gradient(from 90deg, #00ff88, #0cf, #8a2be2, #00ff88);
      top: 70%;
      left: 20%;
      clip-path: polygon(20% 0%, 80% 0%, 100% 20%, 100% 80%, 80% 100%, 20% 100%, 0% 80%, 0% 20%);
    }

    @keyframes fractal-rotate {
      0% {
        transform: rotate(0deg) scale(1);
      }
      50% {
        transform: rotate(180deg) scale(1.2);
      }
      100% {
        transform: rotate(360deg) scale(1);
      }
    }

    /* Liquid Metal Animation */
    #liquid-metal-animation {
      background: linear-gradient(45deg, #1a1a2e, #16213e);
    }

    .metal-blob {
      position: absolute;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #bdc3c7, #2c3e50);
      filter: blur(5px);
      animation: metal-morph 10s infinite ease-in-out;
    }

    @keyframes metal-morph {
      0%, 100% {
        border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
        transform: scale(1);
      }
      25% {
        border-radius: 30% 60% 70% 40% / 50% 60% 30% 60%;
        transform: scale(1.1);
      }
      50% {
        border-radius: 70% 30% 50% 50% / 30% 70% 30% 70%;
        transform: scale(0.9);
      }
      75% {
        border-radius: 40% 60% 70% 30% / 60% 40% 60% 40%;
        transform: scale(1.05);
      }
    }

    /* Nebula Cloud Animation */
    #nebula-animation {
      background: radial-gradient(circle at center, #0a0a12 0%, #1a1a2e 70%);
    }

    .nebula-cloud {
      position: absolute;
      border-radius: 50%;
      filter: blur(30px);
      opacity: 0.5;
      animation: nebula-drift 20s infinite ease-in-out;
    }

    .nebula-cloud:nth-child(1) {
      width: 300px;
      height: 300px;
      background: radial-gradient(circle, #8a2be2, transparent);
      top: 10%;
      left: 20%;
    }

    .nebula-cloud:nth-child(2) {
      width: 400px;
      height: 400px;
      background: radial-gradient(circle, #0cf, transparent);
      top: 50%;
      left: 60%;
    }

    .nebula-cloud:nth-child(3) {
      width: 350px;
      height: 350px;
      background: radial-gradient(circle, #00ff88, transparent);
      top: 70%;
      left: 30%;
    }

    @keyframes nebula-drift {
      0%, 100% {
        transform: translate(0, 0) scale(1);
      }
      33% {
        transform: translate(50px, -30px) scale(1.1);
      }
      66% {
        transform: translate(-30px, 50px) scale(0.9);
      }
    }

    /* Crystal Growth Animation */
    #crystal-animation {
      background: linear-gradient(135deg, #0a0a12 0%, #1a1a2e 100%);
    }

    .crystal {
      position: absolute;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
      clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
      animation: crystal-grow 8s infinite ease-in-out;
    }

    @keyframes crystal-grow {
      0%, 100% {
        transform: scale(0.5) rotate(0deg);
        opacity: 0.3;
      }
      50% {
        transform: scale(1) rotate(180deg);
        opacity: 0.8;
      }
    }

    /* Solar Flare Animation */
    #solar-flare-animation {
      background: radial-gradient(circle at center, #0a0a12 0%, #1a1a2e 70%);
    }

    .solar-center {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: radial-gradient(circle, #ff9a00, #ff6b00);
      box-shadow: 0 0 50px #ff6b00;
    }

    .solar-flare {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 0;
      height: 0;
      border-radius: 50%;
      border: 2px solid rgba(255, 107, 0, 0.5);
      animation: solar-pulse 4s infinite ease-out;
    }

    @keyframes solar-pulse {
      0% {
        width: 0;
        height: 0;
        opacity: 0.8;
      }
      100% {
        width: 100vmax;
        height: 100vmax;
        opacity: 0;
      }
    }

    /* Binary Rain Animation */
    #binary-rain-animation {
      background: #000;
    }

    .binary-digit {
      position: absolute;
      top: -50px;
      color: #00ff88;
      font-family: monospace;
      font-size: 20px;
      animation: binary-fall linear infinite;
      text-shadow: 0 0 5px #00ff88;
    }

    @keyframes binary-fall {
      0% {
        transform: translateY(-100px);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(100vh);
        opacity: 0;
      }
    }

    /* Psychedelic Swirl Animation */
    #psychedelic-animation {
      background: conic-gradient(from 0deg, #ff0080, #8000ff, #0080ff, #00ff80, #ff8000, #ff0080);
      background-size: 400% 400%;
      animation: psychedelic-swirl 10s infinite linear;
    }

    @keyframes psychedelic-swirl {
      0% {
        background-position: 0% 50%;
        filter: hue-rotate(0deg);
      }
      50% {
        background-position: 100% 50%;
        filter: hue-rotate(180deg);
      }
      100% {
        background-position: 0% 50%;
        filter: hue-rotate(360deg);
      }
    }

    /* Magnetic Field Animation */
    #magnetic-field-animation {
      background: linear-gradient(135deg, #0a0a12 0%, #1a1a2e 100%);
    }

    .magnetic-line {
      position: absolute;
      width: 2px;
      height: 100%;
      background: linear-gradient(to bottom, transparent, #0cf, transparent);
      animation: magnetic-pulse 6s infinite ease-in-out;
    }

    @keyframes magnetic-pulse {
      0%, 100% {
        transform: translateX(0) scaleY(1);
        opacity: 0.3;
      }
      50% {
        transform: translateX(10px) scaleY(1.2);
        opacity: 0.8;
      }
    }

    /* Glitch Effect Animation */
    #glitch-animation {
      background: #000;
    }

    .glitch-layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, #ff0080, #0080ff, #00ff80);
      mix-blend-mode: overlay;
      opacity: 0;
      animation: glitch-effect 0.5s infinite;
    }

    .glitch-layer:nth-child(1) {
      transform: translate(-5px, 0);
      animation-delay: 0.1s;
    }

    .glitch-layer:nth-child(2) {
      transform: translate(5px, 0);
      animation-delay: 0.2s;
    }

    @keyframes glitch-effect {
      0%, 100% {
        opacity: 0;
      }
      50% {
        opacity: 0.1;
      }
    }

    /* Hologram Grid Animation */
    #hologram-grid-animation {
      background: linear-gradient(135deg, #0a0a12 0%, #1a1a2e 100%);
    }

    .hologram-line {
      position: absolute;
      background: rgba(0, 255, 136, 0.2);
      box-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
      animation: hologram-scan 4s infinite linear;
    }

    .hologram-line.horizontal {
      width: 100%;
      height: 1px;
    }

    .hologram-line.vertical {
      height: 100%;
      width: 1px;
    }

    @keyframes hologram-scan {
      0% {
        opacity: 0.2;
      }
      50% {
        opacity: 0.8;
      }
      100% {
        opacity: 0.2;
      }
    }

    /* Particle Storm Animation */
    #particle-storm-animation {
      background: #000;
    }

    .storm-particle {
      position: absolute;
      width: 3px;
      height: 3px;
      border-radius: 50%;
      background: white;
      box-shadow: 0 0 5px white;
      animation: storm-move 5s infinite linear;
    }

    @keyframes storm-move {
      0% {
        transform: translate(0, 0);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translate(var(--tx), var(--ty));
        opacity: 0;
      }
    }

    /* Data Stream Animation */
    #data-stream-animation {
      background: linear-gradient(135deg, #0a0a12 0%, #1a1a2e 100%);
    }

    .data-node {
      position: absolute;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #0cf;
      box-shadow: 0 0 10px #0cf;
      animation: data-pulse 2s infinite ease-in-out;
    }

    .data-connection {
      position: absolute;
      height: 2px;
      background: linear-gradient(90deg, transparent, #0cf, transparent);
      transform-origin: left center;
      animation: data-flow 3s infinite linear;
    }

    @keyframes data-pulse {
      0%, 100% {
        transform: scale(1);
        opacity: 0.7;
      }
      50% {
        transform: scale(1.5);
        opacity: 1;
      }
    }

    @keyframes data-flow {
      0% {
        transform: scaleX(0);
        opacity: 0;
      }
      50% {
        opacity: 1;
      }
      100% {
        transform: scaleX(1);
        opacity: 0;
      }
    }

    /* Cosmic Strings Animation */
    #cosmic-strings-animation {
      background: radial-gradient(circle at center, #0a0a12 0%, #1a1a2e 70%);
    }

    .cosmic-string {
      position: absolute;
      width: 2px;
      height: 100%;
      background: linear-gradient(to bottom, transparent, var(--accent), transparent);
      animation: cosmic-vibrate 8s infinite ease-in-out;
    }

    @keyframes cosmic-vibrate {
      0%, 100% {
        transform: translateX(0) scaleY(1);
        opacity: 0.3;
      }
      25% {
        transform: translateX(-5px) scaleY(1.1);
        opacity: 0.7;
      }
      50% {
        transform: translateX(0) scaleY(1);
        opacity: 0.3;
      }
      75% {
        transform: translateX(5px) scaleY(1.1);
        opacity: 0.7;
      }
    }

    /* Time Vortex Animation */
    #time-vortex-animation {
      background: radial-gradient(circle at center, #0a0a12 0%, #1a1a2e 70%);
    }

    .vortex-ring {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      border: 2px solid;
      border-radius: 50%;
      animation: vortex-spin 10s infinite linear;
    }

    .vortex-ring:nth-child(1) {
      width: 100px;
      height: 100px;
      border-color: #0cf;
      animation-delay: 0s;
    }

    .vortex-ring:nth-child(2) {
      width: 200px;
      height: 200px;
      border-color: #8a2be2;
      animation-delay: -2s;
    }

    .vortex-ring:nth-child(3) {
      width: 300px;
      height: 300px;
      border-color: #00ff88;
      animation-delay: -4s;
    }

    @keyframes vortex-spin {
      0% {
        transform: translate(-50%, -50%) rotate(0deg) scale(1);
        opacity: 0.7;
      }
      50% {
        transform: translate(-50%, -50%) rotate(180deg) scale(1.2);
        opacity: 0.3;
      }
      100% {
        transform: translate(-50%, -50%) rotate(360deg) scale(1);
        opacity: 0.7;
      }
    }

    /* Enhanced John Cena Animation */
    .john-cena-animation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
      display: none;
      background: linear-gradient(135deg, #0a0a12 0%, #1a1a2e 100%);
    }

    .cena-theme {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 120px;
      font-weight: bold;
      color: rgba(255, 255, 255, 0.1);
      animation: cena-theme-pulse 8s infinite;
      text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
      z-index: 1;
    }

    .cena-image {
      position: absolute;
      width: 300px;
      height: 400px;
      background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/6/60/John_Cena_July_2018.jpg/640px-John_Cena_July_2018.jpg');
      background-size: cover;
      background-position: center;
      border-radius: 10px;
      box-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
      animation: cena-entrance 3s ease-out, cena-float 6s ease-in-out infinite 3s;
      z-index: 2;
      filter: brightness(1.2) contrast(1.1);
    }

    .cena-sparkle {
      position: absolute;
      width: 10px;
      height: 10px;
      background: white;
      border-radius: 50%;
      box-shadow: 0 0 10px white, 0 0 20px white;
      animation: cena-sparkle 2s infinite;
      z-index: 3;
    }

    .cena-punch {
      position: absolute;
      width: 100px;
      height: 100px;
      background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, transparent 70%);
      border-radius: 50%;
      animation: cena-punch 1.5s infinite;
      z-index: 1;
    }

    .cena-title {
      position: absolute;
      bottom: 20%;
      left: 50%;
      transform: translateX(-50%);
      font-size: 48px;
      font-weight: bold;
      color: white;
      text-shadow: 0 0 10px #0cf, 0 0 20px #0cf, 0 0 30px #0cf;
      animation: cena-title-pulse 2s infinite;
      z-index: 2;
    }

    /* Enhanced John Cena Elements */
    .cena-entrance-animation {
      position: absolute;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.9));
      z-index: 1000;
      overflow: hidden;
    }
    
    .cena-champion-belt {
      position: absolute;
      top: 10%;
      left: 50%;
      transform: translateX(-50%);
      width: 400px;
      height: 80px;
      background: linear-gradient(45deg, #ffd700, #ffed4e, #ffd700);
      border-radius: 10px;
      box-shadow: 0 0 20px gold;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 24px;
      color: #000;
      text-shadow: 1px 1px 2px rgba(255,255,255,0.5);
      z-index: 1001;
      animation: belt-rotate 5s infinite linear;
    }
    
    .cena-champion-belt::before, .cena-champion-belt::after {
      content: "üèÜ";
      font-size: 30px;
      margin: 0 15px;
    }
    
    .cena-you-cant-see-me {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 80px;
      font-weight: bold;
      color: white;
      text-shadow: 0 0 20px rgba(255,255,255,0.7);
      animation: cant-see-me 3s infinite alternate;
      z-index: 1002;
    }
    
    .cena-wrestling-ring {
      position: absolute;
      bottom: 20%;
      left: 50%;
      transform: translateX(-50%);
      width: 500px;
      height: 300px;
      border: 10px solid #ffd700;
      border-radius: 20px;
      box-shadow: 0 0 30px gold;
      z-index: 1003;
    }
    
    .cena-wrestling-ring::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 200px;
      height: 200px;
      border: 5px solid #ffd700;
      border-radius: 50%;
    }
    
    .cena-crowd-cheer {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 100px;
      background: linear-gradient(transparent, rgba(255,255,255,0.1));
      z-index: 1004;
    }
    
    .cena-crowd-person {
      position: absolute;
      bottom: 0;
      width: 30px;
      height: 50px;
      background: rgba(255,255,255,0.3);
      border-radius: 50% 50% 0 0;
      animation: crowd-cheer 2s infinite alternate;
    }
    
    .cena-spotlight {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at center, transparent 30%, rgba(255,255,255,0.1) 70%);
      z-index: 1005;
      pointer-events: none;
      animation: spotlight-move 10s infinite linear;
    }
    
    .cena-mic-drop {
      position: absolute;
      bottom: 30%;
      right: 20%;
      width: 40px;
      height: 150px;
      background: silver;
      border-radius: 5px;
      z-index: 1006;
      animation: mic-drop 3s infinite;
    }
    
    .cena-mic-drop::before {
      content: "";
      position: absolute;
      top: -20px;
      left: 5px;
      width: 30px;
      height: 30px;
      background: gray;
      border-radius: 50%;
    }
    
    .cena-announcer {
      position: absolute;
      top: 20%;
      left: 10%;
      color: white;
      font-size: 24px;
      font-weight: bold;
      text-shadow: 0 0 10px rgba(255,255,255,0.7);
      z-index: 1007;
      animation: announcer-speak 4s infinite;
    }

    @keyframes cena-theme-pulse {
      0%, 100% {
        opacity: 0.1;
        transform: translate(-50%, -50%) scale(1);
      }
      50% {
        opacity: 0.3;
        transform: translate(-50%, -50%) scale(1.1);
      }
    }

    @keyframes cena-entrance {
      0% {
        opacity: 0;
        transform: translateX(-100vw) rotate(-180deg);
      }
      100% {
        opacity: 1;
        transform: translateX(0) rotate(0deg);
      }
    }

    @keyframes cena-float {
      0%, 100% {
        transform: translateY(0) rotate(0deg);
      }
      50% {
        transform: translateY(-20px) rotate(5deg);
      }
    }

    @keyframes cena-sparkle {
      0%, 100% {
        opacity: 0;
        transform: scale(0);
      }
      50% {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes cena-punch {
      0% {
        opacity: 0;
        transform: scale(0);
      }
      50% {
        opacity: 0.7;
        transform: scale(1);
      }
      100% {
        opacity: 0;
        transform: scale(1.5);
      }
    }

    @keyframes cena-title-pulse {
      0%, 100% {
        opacity: 0.7;
        transform: translateX(-50%) scale(1);
      }
      50% {
        opacity: 1;
        transform: translateX(-50%) scale(1.1);
      }
    }

    /* Enhanced John Cena Keyframes */
    @keyframes belt-rotate {
      0% { transform: translateX(-50%) rotate(0deg); }
      25% { transform: translateX(-50%) rotate(5deg); }
      50% { transform: translateX(-50%) rotate(0deg); }
      75% { transform: translateX(-50%) rotate(-5deg); }
      100% { transform: translateX(-50%) rotate(0deg); }
    }
    
    @keyframes cant-see-me {
      0% { opacity: 0.3; transform: translate(-50%, -50%) scale(0.8); }
      100% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
    }
    
    @keyframes crowd-cheer {
      0% { transform: translateY(0); }
      100% { transform: translateY(-20px); }
    }
    
    @keyframes spotlight-move {
      0% { background-position: 0% 0%; }
      25% { background-position: 100% 0%; }
      50% { background-position: 100% 100%; }
      75% { background-position: 0% 100%; }
      100% { background-position: 0% 0%; }
    }
    
    @keyframes mic-drop {
      0% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(100px) rotate(180deg); }
      100% { transform: translateY(0) rotate(360deg); }
    }
    
    @keyframes announcer-speak {
      0%, 100% { opacity: 0; }
      50% { opacity: 1; }
    }

    /* Enhanced Join Board Animations */
    .join-card {
      animation: card-enter 0.8s ease-out;
      position: relative;
      overflow: hidden;
    }
    
    .join-card::after {
      content: "";
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(0, 204, 255, 0.1), transparent);
      transform: rotate(45deg);
      animation: shine 3s infinite;
    }
    
    .join-input-focus {
      transition: all 0.3s ease;
    }
    
    .join-input-focus:focus {
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(0, 204, 255, 0.5);
    }
    
    .join-submit-pulse {
      animation: submit-pulse 2s infinite;
    }
    
    .join-success-animation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 255, 136, 0.9);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      flex-direction: column;
    }
    
    .success-checkmark {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      color: #00ff88;
      margin-bottom: 20px;
      animation: checkmark-pop 0.5s ease-out;
    }
    
    .success-message {
      font-size: 24px;
      font-weight: bold;
      color: #0a0a12;
      text-align: center;
      animation: message-fade 1s ease-out;
    }
    
    @keyframes card-enter {
      0% { transform: translateY(50px) scale(0.8); opacity: 0; }
      100% { transform: translateY(0) scale(1); opacity: 1; }
    }
    
    @keyframes shine {
      0% { transform: rotate(45deg) translateX(-100%); }
      100% { transform: rotate(45deg) translateX(100%); }
    }
    
    @keyframes submit-pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    @keyframes checkmark-pop {
      0% { transform: scale(0); }
      70% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }
    
    @keyframes message-fade {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    /* NEW GLOWING BACKGROUND ANIMATIONS */

    /* Neon Grid Animation */
    .neon-grid {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
      display: none;
      background: linear-gradient(135deg, #0a0a12 0%, #1a1a2e 100%);
    }

    .grid-line {
      position: absolute;
      background: rgba(0, 204, 255, 0.1);
      box-shadow: 0 0 10px rgba(0, 204, 255, 0.3);
    }

    .grid-line.horizontal {
      width: 100%;
      height: 1px;
      animation: grid-pulse 4s infinite ease-in-out;
    }

    .grid-line.vertical {
      height: 100%;
      width: 1px;
      animation: grid-pulse 4s infinite ease-in-out;
    }

    @keyframes grid-pulse {
      0%, 100% {
        opacity: 0.3;
      }
      50% {
        opacity: 0.7;
      }
    }

    /* Liquid Rainbow Animation */
    .liquid-rainbow {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
      display: none;
      background: linear-gradient(45deg, #ff0080, #8000ff, #0080ff, #00ff80, #ff8000);
      background-size: 400% 400%;
      animation: liquid-flow 15s ease infinite;
    }

    @keyframes liquid-flow {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }

    /* Cosmic Energy Animation */
    .cosmic-energy {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
      display: none;
      background: radial-gradient(circle at center, #0a0a12 0%, #1a1a2e 70%);
    }

    .energy-wave {
      position: absolute;
      border-radius: 50%;
      border: 2px solid;
      animation: energy-pulse 8s infinite ease-out;
      opacity: 0;
    }

    .energy-wave:nth-child(1) {
      border-color: #0cf;
      box-shadow: 0 0 20px #0cf;
      animation-delay: 0s;
    }

    .energy-wave:nth-child(2) {
      border-color: #8a2be2;
      box-shadow: 0 0 20px #8a2be2;
      animation-delay: 2s;
    }

    .energy-wave:nth-child(3) {
      border-color: #00ff88;
      box-shadow: 0 0 20px #00ff88;
      animation-delay: 4s;
    }

    .energy-wave:nth-child(4) {
      border-color: #ff6b6b;
      box-shadow: 0 0 20px #ff6b6b;
      animation-delay: 6s;
    }

    @keyframes energy-pulse {
      0% {
        width: 0;
        height: 0;
        top: 50%;
        left: 50%;
        opacity: 0.8;
      }
      100% {
        width: 100vmax;
        height: 100vmax;
        top: calc(50% - 50vmax);
        left: calc(50% - 50vmax);
        opacity: 0;
      }
    }

    /* Holographic Prism Animation */
    .holographic-prism {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
      display: none;
      background: linear-gradient(125deg, 
        rgba(0, 204, 255, 0.1) 0%, 
        rgba(138, 43, 226, 0.1) 25%, 
        rgba(0, 255, 136, 0.1) 50%, 
        rgba(255, 107, 107, 0.1) 75%, 
        rgba(254, 202, 87, 0.1) 100%);
      animation: prism-shift 20s infinite linear;
    }

    .prism-beam {
      position: absolute;
      width: 100%;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--primary), transparent);
      filter: blur(1px);
      animation: beam-sweep 10s infinite linear;
    }

    @keyframes prism-shift {
      0% {
        background-position: 0% 0%;
      }
      100% {
        background-position: 100% 100%;
      }
    }

    @keyframes beam-sweep {
      0% {
        transform: rotate(0deg) translateY(-50vh);
      }
      100% {
        transform: rotate(360deg) translateY(-50vh);
      }
    }

    /* Floating geometric shapes animation - DEFAULT */
    .floating-shapes {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
    }

    .shape {
      position: absolute;
      opacity: 0.1;
      animation: float 20s infinite linear;
    }

    .shape:nth-child(1) {
      width: 80px;
      height: 80px;
      background: var(--primary);
      top: 10%;
      left: 5%;
      border-radius: 50%;
      animation-delay: 0s;
    }

    .shape:nth-child(2) {
      width: 120px;
      height: 120px;
      background: var(--secondary);
      top: 70%;
      left: 80%;
      clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
      animation-delay: -5s;
    }

    .shape:nth-child(3) {
      width: 100px;
      height: 100px;
      background: var(--accent);
      top: 20%;
      left: 85%;
      transform: rotate(45deg);
      animation-delay: -10s;
    }

    .shape:nth-child(4) {
      width: 150px;
      height: 150px;
      background: var(--primary);
      top: 80%;
      left: 10%;
      border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
      animation-delay: -15s;
    }

    @keyframes float {
      0% {
        transform: translate(0, 0) rotate(0deg);
      }
      33% {
        transform: translate(30px, -50px) rotate(120deg);
      }
      66% {
        transform: translate(-20px, 20px) rotate(240deg);
      }
      100% {
        transform: translate(0, 0) rotate(360deg);
      }
    }

    /* Digital Rain Animation */
    .digital-rain {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
      display: none;
    }

    .rain-column {
      position: absolute;
      top: -100px;
      color: var(--accent);
      font-family: monospace;
      font-size: 18px;
      animation: rain-fall linear infinite;
      text-shadow: 0 0 5px var(--accent);
    }

    @keyframes rain-fall {
      0% {
        transform: translateY(-100px);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(100vh);
        opacity: 0;
      }
    }

    /* Particle Galaxy Animation */
    .particle-galaxy {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
      display: none;
    }

    .galaxy-particle {
      position: absolute;
      width: 3px;
      height: 3px;
      background: white;
      border-radius: 50%;
      animation: galaxy-orbit 20s infinite linear;
      box-shadow: 0 0 5px white;
    }

    .galaxy-center {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: radial-gradient(circle, var(--primary), transparent);
      transform: translate(-50%, -50%);
      filter: blur(10px);
      opacity: 0.3;
    }

    @keyframes galaxy-orbit {
      0% {
        transform: rotate(0deg) translateX(200px) rotate(0deg);
      }
      100% {
        transform: rotate(360deg) translateX(200px) rotate(-360deg);
      }
    }

    /* Chat Hook Logo Animation */
    .chat-hook-animation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
      display: none;
    }

    .logo-particle {
      position: absolute;
      font-size: 24px;
      color: var(--primary);
      text-shadow: 0 0 10px var(--primary);
      animation: logo-float 15s infinite linear;
      opacity: 0;
    }

    .hook-element {
      position: absolute;
      width: 4px;
      height: 80px;
      background: var(--accent);
      border-radius: 2px;
      transform-origin: bottom center;
      box-shadow: 0 0 15px var(--accent);
      animation: hook-swing 8s infinite ease-in-out;
    }

    @keyframes logo-float {
      0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(-100px) rotate(360deg);
        opacity: 0;
      }
    }

    @keyframes hook-swing {
      0%, 100% {
        transform: rotate(-15deg);
      }
      50% {
        transform: rotate(15deg);
      }
    }

    /* Custom Name Animation */
    .custom-name-animation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
      display: none;
    }

    .name-particle {
      position: absolute;
      color: var(--secondary);
      font-weight: bold;
      text-shadow: 0 0 5px currentColor;
      animation: name-float 20s infinite linear;
      opacity: 0;
    }

    .name-trail {
      position: absolute;
      width: 2px;
      height: 50px;
      background: linear-gradient(to bottom, transparent, var(--primary), transparent);
      animation: trail-fade 2s infinite ease-in-out;
    }

    .name-echo {
      position: absolute;
      color: var(--accent);
      font-weight: bold;
      font-size: 24px;
      opacity: 0;
      animation: name-echo 3s infinite ease-in-out;
    }

    @keyframes name-float {
      0% {
        transform: translateY(100vh) translateX(-50px) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 0.8;
      }
      90% {
        opacity: 0.8;
      }
      100% {
        transform: translateY(-100px) translateX(50px) rotate(360deg);
        opacity: 0;
      }
    }

    @keyframes trail-fade {
      0%, 100% {
        opacity: 0;
        transform: translateY(0) scale(1);
      }
      50% {
        opacity: 1;
        transform: translateY(-25px) scale(1.2);
      }
    }

    @keyframes name-echo {
      0% {
        transform: scale(1) translate(-50%, -50%);
        opacity: 0;
      }
      50% {
        opacity: 0.7;
      }
      100% {
        transform: scale(3) translate(-50%, -50%);
        opacity: 0;
      }
    }

    /* ===== FIXED LOGO STYLES - MOVED TO TOP ===== */
    .logo-container {
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 9999;
      text-align: center;
      width: auto;
      pointer-events: none;
      perspective: 1000px;
    }

    .big-logo {
      max-width: 180px;
      width: auto;
      height: auto;
      filter: 
        drop-shadow(0 0 15px var(--primary)) 
        drop-shadow(0 0 30px rgba(0, 204, 255, 0.5))
        drop-shadow(0 0 60px rgba(0, 204, 255, 0.3));
      transition: all 0.5s ease;
      animation: logoGlow 3s ease-in-out infinite alternate,
                 logoFloat 6s ease-in-out infinite;
      transform-style: preserve-3d;
      position: relative;
      z-index: 10;
    }

    .big-logo:hover {
      filter: 
        drop-shadow(0 0 25px var(--accent)) 
        drop-shadow(0 0 50px rgba(0, 255, 136, 0.7))
        drop-shadow(0 0 100px rgba(0, 255, 136, 0.4));
      transform: scale(1.05) rotateY(10deg);
      animation: logoHover 1s ease-in-out infinite alternate;
    }

    @keyframes logoGlow {
      0% {
        filter: 
          drop-shadow(0 0 15px var(--primary)) 
          drop-shadow(0 0 30px rgba(0, 204, 255, 0.5))
          drop-shadow(0 0 60px rgba(0, 204, 255, 0.3));
      }
      100% {
        filter: 
          drop-shadow(0 0 20px var(--secondary)) 
          drop-shadow(0 0 40px rgba(138, 43, 226, 0.6))
          drop-shadow(0 0 80px rgba(138, 43, 226, 0.4));
      }
    }

    @keyframes logoFloat {
      0%, 100% {
        transform: translateY(0px) rotateX(0deg);
      }
      50% {
        transform: translateY(-3px) rotateX(3deg);
      }
    }

    @keyframes logoHover {
      0% {
        transform: scale(1.05) rotateY(10deg) translateY(0px);
      }
      100% {
        transform: scale(1.05) rotateY(10deg) translateY(-2px);
      }
    }

    /* Logo Orbital Particles - Adjusted for top position */
    .logo-orbital {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 250px;
      height: 250px;
      pointer-events: none;
      z-index: 9;
    }

    .orbital-particle {
      position: absolute;
      width: 3px;
      height: 3px;
      border-radius: 50%;
      background: var(--accent);
      animation: orbital-rotate 8s linear infinite;
      box-shadow: 0 0 10px var(--accent);
    }

    .orbital-particle:nth-child(1) { animation-delay: 0s; background: var(--primary); }
    .orbital-particle:nth-child(2) { animation-delay: -2s; background: var(--secondary); }
    .orbital-particle:nth-child(3) { animation-delay: -4s; background: var(--accent); }
    .orbital-particle:nth-child(4) { animation-delay: -6s; background: #ff6b6b; }

    @keyframes orbital-rotate {
      0% {
        transform: rotate(0deg) translateX(120px) rotate(0deg);
      }
      100% {
        transform: rotate(360deg) translateX(120px) rotate(-360deg);
      }
    }

    /* Logo Pulse Rings - Adjusted for top position */
    .logo-pulse {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 200px;
      height: 200px;
      pointer-events: none;
      z-index: 8;
    }

    .pulse-ring {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100%;
      height: 100%;
      border: 2px solid var(--primary);
      border-radius: 50%;
      opacity: 0;
      animation: pulse-expand 4s linear infinite;
    }

    .pulse-ring:nth-child(2) { animation-delay: 1s; border-color: var(--secondary); }
    .pulse-ring:nth-child(3) { animation-delay: 2s; border-color: var(--accent); }
    .pulse-ring:nth-child(4) { animation-delay: 3s; border-color: #ff6b6b; }

    @keyframes pulse-expand {
      0% {
        transform: translate(-50%, -50%) scale(0.8);
        opacity: 0.8;
      }
      100% {
        transform: translate(-50%, -50%) scale(1.2);
        opacity: 0;
      }
    }

    /* Animation Selector Button */
    .animation-selector-container {
      position: fixed;
      top: 15px;
      left: 15px;
      z-index: 1000;
    }

    .animation-btn {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
      font-size: 14px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .animation-btn::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 60%);
      transform: scale(0);
      transition: transform 0.5s ease;
    }

    .animation-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 7px 20px rgba(0, 204, 255, 0.4);
    }

    .animation-btn:hover::after {
      transform: scale(1);
    }

    /* Animation Selection Modal */
    .animation-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(5, 5, 10, 0.95);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      backdrop-filter: blur(5px);
    }

    .animation-card {
      background: var(--card-bg);
      padding: 20px;
      border-radius: 20px;
      width: 90%;
      max-width: 600px;
      max-height: 80vh;
      text-align: center;
      color: var(--text);
      border: 1px solid rgba(0, 204, 255, 0.2);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .animation-content {
      overflow-y: auto;
      padding-right: 10px;
      flex: 1;
    }

    .animation-content::-webkit-scrollbar {
      width: 8px;
    }

    .animation-content::-webkit-scrollbar-track {
      background: rgba(30, 30, 50, 0.5);
      border-radius: 10px;
    }

    .animation-content::-webkit-scrollbar-thumb {
      background: linear-gradient(var(--primary), var(--secondary));
      border-radius: 10px;
    }

    .animation-content::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(var(--accent), var(--primary));
    }

    .animation-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: linear-gradient(90deg, var(--primary), var(--accent), var(--secondary));
    }

    .animation-card h2 {
      margin-bottom: 15px;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      font-size: 24px;
    }

    .animation-category {
      margin: 15px 0 10px;
      text-align: left;
      font-size: 16px;
      color: var(--accent);
      border-bottom: 1px solid rgba(0, 204, 255, 0.3);
      padding-bottom: 5px;
    }

    .animation-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 10px;
      margin: 10px 0;
    }

    .animation-option {
      background: rgba(30, 30, 50, 0.7);
      border: 2px solid rgba(100, 100, 255, 0.2);
      border-radius: 12px;
      padding: 15px 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }

    .animation-option:hover {
      transform: translateY(-3px);
      border-color: var(--primary);
      box-shadow: 0 10px 20px rgba(0, 204, 255, 0.2);
    }

    .animation-option.active {
      border-color: var(--accent);
      background: rgba(0, 255, 136, 0.1);
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
    }

    .animation-icon {
      font-size: 24px;
      margin-bottom: 5px;
    }

    .animation-controls {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 15px;
      flex-shrink: 0;
    }

    .animation-controls button {
      padding: 10px 16px;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .close-animation-btn { 
      background: rgba(255,255,255,0.1); 
      color: var(--text); 
      border: 1px solid rgba(100, 100, 255, 0.3);
    }

    .submit-animation-btn {
      background: linear-gradient(135deg, var(--accent), var(--primary));
      color: white;
    }

    .animation-controls button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .submit-animation-btn:hover {
      box-shadow: 0 5px 15px rgba(0, 255, 136, 0.4);
    }

    /* Custom Name Input */
    .custom-name-input {
      width: 100%;
      padding: 10px 12px;
      margin: 10px 0;
      border: 1px solid rgba(100, 100, 255, 0.3);
      border-radius: 8px;
      background: rgba(30, 30, 50, 0.7);
      color: var(--text);
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .custom-name-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 10px rgba(0, 204, 255, 0.3);
    }

    /* ===== FIXED MESSAGE CONTAINER - PROPER SPACING ===== */
    .message-container {
      position: fixed;
      top: 100px; /* Space for logo */
      bottom: 80px; /* Space for input */
      left: 0;
      right: 0;
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      overflow-y: auto;
      overflow-x: hidden;
      scroll-behavior: smooth;
    }

    /* Message styling with proper spacing */
    .message {
      margin: 20px 0;
      animation: messageSlide 0.4s ease-out;
      display: flex;
      align-items: flex-start;
    }

    .message:first-child {
      margin-top: 0;
    }

    .message:last-child {
      margin-bottom: 0;
    }

    .message.own {
      justify-content: flex-end;
    }

    .message-bubble {
      max-width: 70%;
      padding: 12px 18px;
      border-radius: 20px;
      position: relative;
      backdrop-filter: blur(10px);
    }

    .message.other .message-bubble {
      background: rgba(30, 30, 50, 0.7);
      border: 1px solid rgba(100, 100, 255, 0.2);
      border-bottom-left-radius: 5px;
    }

    .message.own .message-bubble {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border-bottom-right-radius: 5px;
      box-shadow: 0 5px 15px rgba(0, 204, 255, 0.3);
    }

    .message-user {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
    }

    /* FIXED: User avatar in messages */
    .message .user-avatar {
      width: 30px !important;
      height: 30px !important;
      border-radius: 50% !important;
      margin-right: 10px !important;
      border: 2px solid var(--primary) !important;
      background: linear-gradient(135deg, var(--primary), var(--secondary)) !important;
      color: white !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      font-size: 14px !important;
      font-weight: bold !important;
      cursor: pointer;
      transition: transform 0.2s ease;
      overflow: hidden;
    }

    .message .user-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .message .user-avatar:hover {
      transform: scale(1.1);
    }

    .user-name {
      font-weight: bold;
      font-size: 14px;
      cursor: pointer;
      transition: color 0.2s ease;
      display: inline-flex;
      align-items: center;
    }

    .user-name:hover {
      color: var(--accent);
      text-decoration: underline;
    }

    .message.own .user-name {
      color: var(--accent);
    }

    .message-content {
      font-size: 15px;
      line-height: 1.5;
      word-wrap: break-word;
    }

    .message-meta {
      font-size: 11px;
      opacity: 0.7;
      margin-top: 8px;
      display: flex;
      justify-content: space-between;
    }

    @keyframes messageSlide {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* ===== FIXED SEND CONTAINER - PROPER POSITIONING ===== */
    #send-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(10, 10, 20, 0.95);
      backdrop-filter: blur(15px);
      padding: 15px 20px;
      border-top: 1px solid rgba(0, 204, 255, 0.2);
      box-sizing: border-box;
      z-index: 100;
      box-shadow: 0 -5px 25px rgba(0, 0, 0, 0.5);
    }

    #messageInp {
      flex: 1;
      max-width: 800px;
      border: none;
      height: 45px;
      border-radius: 25px;
      padding: 0 20px;
      background: rgba(30, 30, 50, 0.9);
      color: var(--text);
      font-size: 15px;
      outline: none;
      border: 1px solid rgba(100, 100, 255, 0.2);
      transition: all 0.3s ease;
    }

    #messageInp:focus {
      border-color: var(--primary);
      box-shadow: 0 0 15px rgba(0, 204, 255, 0.3);
      background: rgba(40, 40, 60, 0.95);
    }

    #messageInp::placeholder {
      color: var(--text-muted);
    }

    .btn {
      cursor: pointer;
      border: none;
      height: 45px;
      padding: 0 25px;
      border-radius: 25px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      font-weight: 600;
      font-size: 15px;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: 0.5s;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 7px 20px rgba(0, 204, 255, 0.4);
    }

    .btn:hover::before {
      left: 100%;
    }

    /* ===== COMEDY CLUB BUTTON (RESTORED - BELOW ANIMATION BUTTON) ===== */
    .comedy-club-container {
      position: fixed;
      top: 80px; /* Positioned below animation button */
      left: 15px;
      z-index: 1000;
    }

    .comedy-btn {
      background: linear-gradient(135deg, var(--accent), #ff6b6b);
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
      font-size: 14px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .comedy-btn::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 60%);
      transform: scale(0);
      transition: transform 0.5s ease;
    }

    .comedy-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 7px 20px rgba(0, 255, 136, 0.4);
    }

    .comedy-btn:hover::after {
      transform: scale(1);
    }

    .comedy-btn i {
      font-size: 16px;
    }

    /* Comedy Club Modal - FIXED POSITIONING */
    .comedy-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(5, 5, 10, 0.95);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      backdrop-filter: blur(5px);
    }

    .comedy-card {
      background: var(--card-bg);
      padding: 25px;
      border-radius: 20px;
      width: 90%;
      max-width: 450px;
      text-align: center;
      color: var(--text);
      border: 1px solid rgba(0, 204, 255, 0.2);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      position: relative;
      overflow: hidden;
      margin: 20px;
    }

    .comedy-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: linear-gradient(90deg, var(--primary), var(--accent), var(--secondary));
    }

    .comedy-card h2 {
      margin-bottom: 15px;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      font-size: 24px;
    }

    .joke-display {
      font-size: 16px;
      margin: 15px 0;
      min-height: 70px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(30, 30, 50, 0.5);
      padding: 15px;
      border-radius: 12px;
      border: 1px solid rgba(100, 100, 255, 0.2);
    }

    .comedy-controls {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin: 15px 0;
      flex-wrap: wrap;
    }

    .comedy-controls button {
      padding: 10px 16px;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
      font-size: 13px;
      transition: all 0.3s ease;
    }

    .new-joke-btn { 
      background: linear-gradient(135deg, var(--accent), #00a8cc); 
      color: white; 
    }
    .share-joke-btn { 
      background: linear-gradient(135deg, var(--primary), var(--secondary)); 
      color: white; 
    }
    .close-comedy-btn { 
      background: rgba(255,255,255,0.1); 
      color: var(--text); 
      border: 1px solid rgba(100, 100, 255, 0.3);
    }

    .comedy-controls button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .joke-stats {
      display: flex;
      justify-content: space-around;
      margin-top: 15px;
      font-size: 13px;
      opacity: 0.8;
    }

    .add-joke-section {
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid rgba(100, 100, 255, 0.2);
    }

    .add-joke-input {
      width: 100%;
      padding: 10px;
      border: none;
      border-radius: 8px;
      margin: 8px 0;
      font-size: 13px;
      background: rgba(30, 30, 50, 0.7);
      color: var(--text);
      border: 1px solid rgba(100, 100, 255, 0.2);
    }

    .add-joke-input:focus {
      outline: none;
      border-color: var(--primary);
    }

    .submit-joke-btn {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 18px;
      cursor: pointer;
      font-size: 13px;
      transition: all 0.3s ease;
    }

    .submit-joke-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 204, 255, 0.3);
    }

    .laughter-animation {
      position: absolute;
      font-size: 20px;
      animation: floatUp 2s ease-in-out;
      z-index: 10;
    }

    @keyframes floatUp {
      0% { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(-80px); opacity: 0; }
    }

    /* Join Modal */
    .join-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(5, 5, 10, 0.95);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      backdrop-filter: blur(10px);
    }

    .join-card {
      background: var(--card-bg);
      padding: 25px;
      border-radius: 20px;
      width: 90%;
      max-width: 380px;
      border: 1px solid rgba(0, 204, 255, 0.2);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
      position: relative;
      overflow: hidden;
    }

    .join-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: linear-gradient(90deg, var(--primary), var(--accent), var(--secondary));
    }

    .join-card h2 {
      margin: 0 0 15px 0;
      text-align: center;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      font-size: 24px;
    }

    .join-card input, .join-card select {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border: 1px solid rgba(100, 100, 255, 0.3);
      border-radius: 8px;
      background: rgba(30, 30, 50, 0.7);
      color: var(--text);
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .join-card input:focus, .join-card select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 10px rgba(0, 204, 255, 0.3);
    }

    .join-card button {
      width: 100%;
      padding: 12px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      border-radius: 8px;
      margin-top: 12px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .join-card button:hover {
      transform: translateY(-2px);
      box-shadow: 0 7px 20px rgba(0, 204, 255, 0.4);
    }

    /* Connection status indicator */
    .connection-status {
      position: fixed;
      bottom: 100px;
      right: 20px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: var(--text-muted);
      z-index: 100;
      background: rgba(0,0,0,0.3);
      padding: 5px 10px;
      border-radius: 20px;
      backdrop-filter: blur(5px);
    }

    .status-indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--accent);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { opacity: 0.7; }
      50% { opacity: 1; }
      100% { opacity: 0.7; }
    }

    /* Scrollbar styling */
    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(30, 30, 50, 0.5);
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
      background: linear-gradient(var(--primary), var(--secondary));
      border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(var(--accent), var(--primary));
    }

    /* Confirmation animation */
    @keyframes confirmPulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    .confirmation-message {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 255, 136, 0.9);
      color: #0a0a12;
      padding: 15px 30px;
      border-radius: 12px;
      font-weight: bold;
      z-index: 3000;
      box-shadow: 0 0 30px rgba(0, 255, 136, 0.7);
      animation: confirmPulse 0.5s ease-in-out;
    }

    /* User Avatar fixed position - MOVED MORE LEFT */
    #userAvatar {
      position: fixed;
      top: 15px;
      right: 160px;
      width: 45px;
      height: 45px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 20px;
      border: 2px solid var(--accent);
      box-shadow: 0 0 15px rgba(0, 255, 136, 0.3);
      overflow: hidden;
      cursor: pointer;
      z-index: 1000;
      transition: all 0.3s ease;
    }

    #userAvatar:hover {
      transform: scale(1.05);
      box-shadow: 0 0 25px rgba(0, 255, 136, 0.6);
    }

    #userAvatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* ===== PRIVATE CHAT BUTTON - REMOVED ===== */

    /* ===== ONLINE USERS LIST (Now on left side) ===== */
    .online-users-list {
      position: fixed;
      bottom: 170px;
      left: 20px;
      width: 320px;
      max-height: 450px;
      background: rgba(20, 20, 30, 0.98);
      backdrop-filter: blur(15px);
      border-radius: 20px;
      border: 1px solid rgba(0, 204, 255, 0.3);
      overflow: hidden;
      z-index: 550;
      display: none;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .online-users-list.active {
      display: block;
    }

    .online-users-header {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      padding: 15px;
      color: white;
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .online-users-header .close-btn {
      cursor: pointer;
      font-size: 20px;
      transition: transform 0.2s ease;
    }

    .online-users-header .close-btn:hover {
      transform: scale(1.2);
    }

    .online-users {
      list-style: none;
      padding: 10px;
      margin: 0;
      max-height: 350px;
      overflow-y: auto;
    }

    .online-user-item {
      display: flex;
      align-items: center;
      padding: 12px;
      margin: 5px 0;
      background: rgba(30, 30, 50, 0.7);
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid transparent;
    }

    .online-user-item:hover {
      border-color: var(--primary);
      transform: translateX(5px);
      background: rgba(30, 30, 50, 0.9);
    }

    .online-user-item .user-avatar-small {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      margin-right: 10px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 16px;
      overflow: hidden;
    }

    .online-user-item .user-avatar-small img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .online-user-status {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      margin-right: 12px;
      background: #00ff88;
      box-shadow: 0 0 10px #00ff88;
      animation: statusPulse 2s infinite;
    }

    @keyframes statusPulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .online-user-name {
      flex: 1;
      font-size: 14px;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .online-user-message {
      font-size: 11px;
      color: var(--text-muted);
      margin-left: 5px;
    }

    /* ===== PRIVATE CHAT WINDOW - REMOVED ===== */

    /* Typing indicator */
    .typing-indicator {
      padding: 5px 15px;
      font-size: 12px;
      color: var(--text-muted);
      font-style: italic;
    }

    .typing-indicator span {
      animation: typing 1.5s infinite;
      display: inline-block;
    }

    @keyframes typing {
      0% { opacity: 0.3; }
      50% { opacity: 1; }
      100% { opacity: 0.3; }
    }

    /* Weather and time display - from your screenshot */
    .weather-time {
      position: fixed;
      top: 15px;
      left: 50%;
      transform: translateX(-50%);
      color: var(--text-muted);
      font-size: 12px;
      background: rgba(0,0,0,0.3);
      padding: 5px 15px;
      border-radius: 20px;
      backdrop-filter: blur(5px);
      z-index: 9998;
      margin-top: 70px; /* Below logo */
      pointer-events: none;
    }

    /* ===== PROFILE PANEL WITH PROFILE PICTURE UPLOAD ===== */
    .profile-panel {
      position: fixed;
      top: 0;
      right: -400px;
      width: 380px;
      height: 100vh;
      background: rgba(20, 20, 30, 0.98);
      backdrop-filter: blur(20px);
      border-left: 2px solid var(--primary);
      box-shadow: -10px 0 30px rgba(0, 0, 0, 0.5);
      z-index: 2000;
      transition: right 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      display: flex;
      flex-direction: column;
      overflow-y: auto;
    }

    .profile-panel.active {
      right: 0;
    }

    .profile-panel-header {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      padding: 25px;
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .profile-panel-header h2 {
      font-size: 24px;
      font-weight: 600;
    }

    .profile-panel-header .close-btn {
      cursor: pointer;
      font-size: 28px;
      transition: transform 0.2s ease;
    }

    .profile-panel-header .close-btn:hover {
      transform: scale(1.2);
    }

    .profile-content {
      padding: 25px;
      flex: 1;
    }

    .profile-pic-upload {
      position: relative;
      width: 120px;
      height: 120px;
      margin: 0 auto 20px;
      cursor: pointer;
    }

    .profile-pic-preview {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      display: flex;
      align-items: center;
      justify-content: center;
      border: 4px solid var(--accent);
      box-shadow: 0 0 30px rgba(0, 255, 136, 0.5);
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .profile-pic-preview:hover {
      transform: scale(1.05);
      box-shadow: 0 0 40px rgba(0, 255, 136, 0.8);
    }

    .profile-pic-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .profile-pic-preview span {
      font-size: 48px;
      font-weight: bold;
      color: white;
    }

    .upload-overlay {
      position: absolute;
      bottom: 0;
      right: 0;
      width: 35px;
      height: 35px;
      background: var(--accent);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--dark-bg);
      font-size: 18px;
      border: 2px solid var(--primary);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .upload-overlay:hover {
      transform: scale(1.1);
      background: var(--primary);
      color: white;
    }

    #profile-pic-input {
      display: none;
    }

    .profile-field {
      margin: 20px 0;
    }

    .profile-field label {
      display: block;
      margin-bottom: 8px;
      color: var(--accent);
      font-weight: 500;
      font-size: 14px;
    }

    .profile-field input, .profile-field select {
      width: 100%;
      padding: 12px;
      border: 2px solid rgba(0, 204, 255, 0.2);
      border-radius: 12px;
      background: rgba(30, 30, 50, 0.7);
      color: var(--text);
      font-size: 15px;
      transition: all 0.3s ease;
    }

    .profile-field input:focus, .profile-field select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 15px rgba(0, 204, 255, 0.3);
    }

    .save-profile-btn {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, var(--accent), var(--primary));
      color: #0a0a12;
      border: none;
      border-radius: 12px;
      font-weight: bold;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 20px;
    }

    .save-profile-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(0, 255, 136, 0.4);
    }

    /* ===== USER PROFILE MODAL WITH PROFILE PICTURE ===== */
    .user-profile-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(5, 5, 10, 0.8);
      backdrop-filter: blur(10px);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 3000;
    }

    .user-profile-modal.active {
      display: flex;
    }

    .profile-modal-card {
      background: rgba(20, 20, 30, 0.98);
      backdrop-filter: blur(20px);
      border-radius: 30px;
      width: 90%;
      max-width: 400px;
      padding: 30px;
      border: 2px solid var(--primary);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
      animation: modalPop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      text-align: center;
      position: relative;
    }

    @keyframes modalPop {
      from {
        opacity: 0;
        transform: scale(0.8);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    .modal-avatar {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      margin: 0 auto 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 4px solid var(--accent);
      overflow: hidden;
    }

    .modal-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .modal-avatar span {
      font-size: 48px;
      font-weight: bold;
      color: white;
    }

    .modal-username {
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 5px;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
    }

    .modal-country {
      font-size: 16px;
      color: var(--text-muted);
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
    }

    .modal-bio {
      background: rgba(30, 30, 50, 0.5);
      padding: 15px;
      border-radius: 15px;
      margin: 20px 0;
      font-size: 14px;
      line-height: 1.6;
      border: 1px solid rgba(0, 204, 255, 0.2);
    }

    .modal-actions {
      display: flex;
      gap: 15px;
      justify-content: center;
    }

    .dm-btn {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 30px;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s ease;
      width: 100%;
      justify-content: center;
    }

    .dm-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(0, 204, 255, 0.4);
    }

    .dm-btn i {
      font-size: 18px;
    }

    .modal-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: none;
      border: none;
      color: var(--text);
      font-size: 28px;
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .modal-close:hover {
      transform: scale(1.2);
      color: var(--accent);
    }

    /* ===== TOP BUTTONS CONTAINER ===== */
    .top-buttons {
      position: fixed;
      top: 15px;
      right: 15px;
      display: flex;
      gap: 10px;
      z-index: 1000;
    }

    /* Profile Button */
    .profile-btn {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border: 2px solid var(--accent);
      padding: 8px 20px;
    }

    .profile-btn i {
      color: white;
    }

    /* ===== GOOGLE LOGIN BUTTON STYLES ===== */
    .google-login-container {
      margin-top: 15px;
      text-align: center;
    }

    .google-login-btn {
      background: white;
      color: #444;
      border: none;
      padding: 10px 15px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      width: 100%;
      transition: all 0.3s ease;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    .google-login-btn:hover {
      background: #f5f5f5;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }

    .google-login-btn i {
      color: #4285F4;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <!-- NEW ANIMATION CONTAINERS -->
  <div class="animation-container" id="quantum-wave-animation"></div>
  <div class="animation-container" id="cyber-grid-animation"></div>
  <div class="animation-container" id="aurora-animation"></div>
  <div class="animation-container" id="matrix-animation"></div>
  <div class="animation-container" id="fireworks-animation"></div>
  <div class="animation-container" id="bubble-universe-animation"></div>
  <div class="animation-container" id="fractal-animation"></div>
  <div class="animation-container" id="liquid-metal-animation"></div>
  <div class="animation-container" id="nebula-animation"></div>
  <div class="animation-container" id="crystal-animation"></div>
  <div class="animation-container" id="solar-flare-animation"></div>
  <div class="animation-container" id="binary-rain-animation"></div>
  <div class="animation-container" id="psychedelic-animation"></div>
  <div class="animation-container" id="magnetic-field-animation"></div>
  <div class="animation-container" id="glitch-animation"></div>
  <div class="animation-container" id="hologram-grid-animation"></div>
  <div class="animation-container" id="particle-storm-animation"></div>
  <div class="animation-container" id="data-stream-animation"></div>
  <div class="animation-container" id="cosmic-strings-animation"></div>
  <div class="animation-container" id="time-vortex-animation"></div>
  <!-- Grid Scan Animation Container -->
  <div class="animation-container" id="grid-scan-animation">
    <div class="grid-scan-canvas-container"></div>
  </div>

  <!-- Existing animation containers -->
  <div class="floating-shapes" id="default-animation">
    <div class="shape"></div>
    <div class="shape"></div>
    <div class="shape"></div>
    <div class="shape"></div>
  </div>

  <!-- NEW GLOWING ANIMATIONS -->
  <div class="neon-grid" id="neon-grid-animation"></div>
  <div class="liquid-rainbow" id="liquid-rainbow-animation"></div>
  <div class="cosmic-energy" id="cosmic-energy-animation"></div>
  <div class="holographic-prism" id="holographic-prism-animation"></div>
  <div class="digital-rain" id="digital-rain-animation"></div>
  <div class="particle-galaxy" id="galaxy-animation">
    <div class="galaxy-center"></div>
  </div>
  <div class="chat-hook-animation" id="chat-hook-animation"></div>
  <div class="custom-name-animation" id="custom-name-animation"></div>

  <!-- Enhanced John Cena Animation -->
  <div class="john-cena-animation" id="john-cena-animation">
    <div class="cena-entrance-animation">
      <div class="cena-champion-belt">CHAMPION</div>
      <div class="cena-you-cant-see-me">YOU CAN'T SEE ME!</div>
      <div class="cena-wrestling-ring"></div>
      <div class="cena-crowd-cheer" id="cena-crowd"></div>
      <div class="cena-spotlight"></div>
      <div class="cena-mic-drop"></div>
      <div class="cena-announcer">AND HIS NAME IS JOHN CENA!</div>
    </div>
    <div class="cena-theme">JOHN CENA</div>
    <div class="cena-title">JOHN CENA</div>
  </div>

  <!-- Join Success Animation -->
  <div class="join-success-animation" id="join-success-animation">
    <div class="success-checkmark">‚úì</div>
    <div class="success-message">Welcome to Chat Hook!</div>
  </div>

  <!-- Animation Selector Button -->
  <div class="animation-selector-container">
    <button class="animation-btn" onclick="openAnimationSelector()">‚ú® Change Animation</button>
  </div>

  <!-- COMEDY CLUB BUTTON - RESTORED (below animation button) -->
  <div class="comedy-club-container">
    <button class="comedy-btn" onclick="openComedyClub()">
      <i class="fas fa-laugh-squint"></i> Comedy Club
    </button>
  </div>

  <!-- FIXED: User Avatar Display - MOVED MORE LEFT -->
  <div class="user-avatar" id="userAvatar"></div>

  <!-- ===== FIXED LOGO - MOVED TO TOP ===== -->
  <div class="logo-container">
    <!-- Orbital Particles -->
    <div class="logo-orbital">
      <div class="orbital-particle"></div>
      <div class="orbital-particle"></div>
      <div class="orbital-particle"></div>
      <div class="orbital-particle"></div>
    </div>
    
    <!-- Pulse Rings -->
    <div class="logo-pulse">
      <div class="pulse-ring"></div>
      <div class="pulse-ring"></div>
      <div class="pulse-ring"></div>
      <div class="pulse-ring"></div>
    </div>
    
    <!-- TEMPORARY TEXT LOGO - Shows "Chat Hook" with cool style -->
    <div class="big-logo" style="font-size: 28px; font-weight: bold; color: #0cf; text-shadow: 0 0 15px #0cf, 0 0 30px #8a2be2; background: transparent; line-height: 1.2;">
      CHAT<br>HOOK
      <div style="font-size: 10px; color: var(--accent); text-shadow: 0 0 8px var(--accent); margin-top: 3px;">Where Every Chat Matters</div>
    </div>
  </div>

  <!-- TOP BUTTONS - Profile Button -->
  <div class="top-buttons">
    <button class="profile-btn comedy-btn" onclick="toggleProfilePanel()">
      <i class="fas fa-user-circle"></i> Profile
    </button>
  </div>

  <!-- Message container -->
  <div class="message-container" id="message-container"></div>

  <!-- Weather and Time Display -->
  <div class="weather-time" id="weatherTime">
    28¬∞C Partly Cloudy ‚Ä¢ 02:23 PM ‚Ä¢ 2/17/2026
  </div>

  <!-- Connection status -->
  <div class="connection-status">
    <div class="status-indicator"></div>
    <span>Connected</span>
  </div>

  <!-- Message input form -->
  <form id="send-container">
    <input type="text" name="messageInp" id="messageInp" placeholder="Type your message..." />
    <button class="btn" type="submit">Send</button>
  </form>

  <!-- ===== PRIVATE CHAT BUTTON - REMOVED ===== -->

  <!-- ===== ONLINE USERS LIST (Now on left side) ===== -->
  <div class="online-users-list" id="onlineUsersList">
    <div class="online-users-header">
      <span>Online Users</span>
      <span class="close-btn" onclick="toggleOnlineUsers()">√ó</span>
    </div>
    <div class="online-users" id="onlineUsersContainer">
      <!-- Users will be added here dynamically -->
    </div>
  </div>

  <!-- ===== ONLINE USERS LIST (FOR CLIENT.JS) ===== -->
  <div id="online-users-list" class="online-users-list"></div>

  <!-- ===== PRIVATE CHAT WINDOW - REMOVED ===== -->

  <!-- ===== PROFILE PANEL WITH PROFILE PICTURE UPLOAD ===== -->
  <div class="profile-panel" id="profilePanel">
    <div class="profile-panel-header">
      <h2>Your Profile</h2>
      <span class="close-btn" onclick="toggleProfilePanel()">√ó</span>
    </div>
    <div class="profile-content">
      <!-- Profile Picture Upload -->
      <div class="profile-pic-upload" onclick="document.getElementById('profile-pic-input').click()">
        <div class="profile-pic-preview" id="profilePicPreview">
          <span id="profilePicInitial">üë§</span>
        </div>
        <div class="upload-overlay">
          <i class="fas fa-camera"></i>
        </div>
      </div>
      <input type="file" id="profile-pic-input" accept="image/*" onchange="handleProfilePicUpload(event)">
      
      <div class="profile-field">
        <label><i class="fas fa-user"></i> Username</label>
        <input type="text" id="profileUsername" placeholder="Your name" value="">
      </div>

      <div class="profile-field">
        <label><i class="fas fa-globe"></i> Country</label>
        <select id="profileCountry">
          <option value="India">India</option>
          <option value="United States">United States</option>
          <option value="United Kingdom">United Kingdom</option>
          <option value="Canada">Canada</option>
          <option value="Australia">Australia</option>
          <option value="Germany">Germany</option>
          <option value="Other">Other</option>
        </select>
      </div>

      <button class="save-profile-btn" onclick="saveProfile()">
        <i class="fas fa-save"></i> Save Changes
      </button>
    </div>
  </div>

  <!-- ===== USER PROFILE MODAL WITH PROFILE PICTURE ===== -->
  <div class="user-profile-modal" id="userProfileModal">
    <div class="profile-modal-card">
      <button class="modal-close" onclick="closeUserProfileModal()">√ó</button>
      <div class="modal-avatar" id="modalAvatar">
        <span>üë§</span>
      </div>
      <div class="modal-username" id="modalUsername">
        Username
      </div>
      <div class="modal-country" id="modalCountry">
        <i class="fas fa-map-marker-alt"></i>
        <span>Country</span>
      </div>
      
      <div class="modal-bio" id="modalBio">
        Hey there! I'm using Chat Hook. Love connecting with new people!
      </div>
      <div class="modal-actions">
        <button class="dm-btn" id="dmBtn" onclick="openPrivateChatFromModal()">
          <i class="fas fa-paper-plane"></i>
          <span>Send Message</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Animation Selection Modal -->
  <div id="animation-modal" class="animation-modal">
    <div class="animation-card">
      <div class="animation-content">
        <h2>üé® Background Animation</h2>
        <p>Choose your favorite background animation:</p>
        
        <div class="animation-category">Sci-Fi & Fantasy</div>
        <div class="animation-options">
          <div class="animation-option active" data-animation="default">
            <div class="animation-icon">üî∑</div>
            <span>Floating Shapes</span>
          </div>
          <div class="animation-option" data-animation="quantum-wave">
            <div class="animation-icon">üåÄ</div>
            <span>Quantum Wave</span>
          </div>
          <div class="animation-option" data-animation="cyber-grid">
            <div class="animation-icon">üî∑</div>
            <span>Cyber Grid</span>
          </div>
          <div class="animation-option" data-animation="aurora">
            <div class="animation-icon">üåå</div>
            <span>Aurora Borealis</span>
          </div>
          <div class="animation-option" data-animation="matrix">
            <div class="animation-icon">üíª</div>
            <span>Matrix Code</span>
          </div>
        </div>

        <div class="animation-category">Nature & Cosmic</div>
        <div class="animation-options">
          <div class="animation-option" data-animation="fireworks">
            <div class="animation-icon">üéÜ</div>
            <span>Fireworks</span>
          </div>
          <div class="animation-option" data-animation="bubble-universe">
            <div class="animation-icon">üîµ</div>
            <span>Bubble Universe</span>
          </div>
          <div class="animation-option" data-animation="fractal">
            <div class="animation-icon">üî∫</div>
            <span>Geometric Fractal</span>
          </div>
          <div class="animation-option" data-animation="liquid-metal">
            <div class="animation-icon">üíß</div>
            <span>Liquid Metal</span>
          </div>
          <div class="animation-option" data-animation="nebula">
            <div class="animation-icon">‚òÅÔ∏è</div>
            <span>Nebula Cloud</span>
          </div>
          <div class="animation-option" data-animation="crystal">
            <div class="animation-icon">üíé</div>
            <span>Crystal Growth</span>
          </div>
          <div class="animation-option" data-animation="solar-flare">
            <div class="animation-icon">‚òÄÔ∏è</div>
            <span>Solar Flare</span>
          </div>
        </div>

        <div class="animation-category">Abstract & Psychedelic</div>
        <div class="animation-options">
          <div class="animation-option" data-animation="binary-rain">
            <div class="animation-icon">üî¢</div>
            <span>Binary Rain</span>
          </div>
          <div class="animation-option" data-animation="psychedelic">
            <div class="animation-icon">üåà</div>
            <span>Psychedelic Swirl</span>
          </div>
          <div class="animation-option" data-animation="magnetic-field">
            <div class="animation-icon">üß≤</div>
            <span>Magnetic Field</span>
          </div>
          <div class="animation-option" data-animation="glitch">
            <div class="animation-icon">üì∫</div>
            <span>Glitch Effect</span>
          </div>
          <div class="animation-option" data-animation="hologram-grid">
            <div class="animation-icon">üî≥</div>
            <span>Hologram Grid</span>
          </div>
          <div class="animation-option" data-animation="particle-storm">
            <div class="animation-icon">üå™Ô∏è</div>
            <span>Particle Storm</span>
          </div>
          <div class="animation-option" data-animation="data-stream">
            <div class="animation-icon">üìä</div>
            <span>Data Stream</span>
          </div>
          <div class="animation-option" data-animation="cosmic-strings">
            <div class="animation-icon">üå†</div>
            <span>Cosmic Strings</span>
          </div>
          <div class="animation-option" data-animation="time-vortex">
            <div class="animation-icon">‚è≥</div>
            <span>Time Vortex</span>
          </div>
        </div>

        <div class="animation-category">Special Animations</div>
        <div class="animation-options">
          <div class="animation-option" data-animation="neon-grid">
            <div class="animation-icon">üî≤</div>
            <span>Neon Grid</span>
          </div>
          <div class="animation-option" data-animation="liquid-rainbow">
            <div class="animation-icon">üåà</div>
            <span>Liquid Rainbow</span>
          </div>
          <div class="animation-option" data-animation="cosmic-energy">
            <div class="animation-icon">‚ö°</div>
            <span>Cosmic Energy</span>
          </div>
          <div class="animation-option" data-animation="holographic-prism">
            <div class="animation-icon">üíé</div>
            <span>Holographic Prism</span>
          </div>
          <div class="animation-option" data-animation="digital-rain">
            <div class="animation-icon">üåßÔ∏è</div>
            <span>Digital Rain</span>
          </div>
          <div class="animation-option" data-animation="galaxy">
            <div class="animation-icon">üåå</div>
            <span>Particle Galaxy</span>
          </div>
          <div class="animation-option" data-animation="chat-hook">
            <div class="animation-icon">üí¨</div>
            <span>Chat Hook Logo</span>
          </div>
          <div class="animation-option" data-animation="custom-name">
            <div class="animation-icon">‚ú®</div>
            <span>Custom Name</span>
          </div>
          <div class="animation-option" data-animation="john-cena">
            <div class="animation-icon">üí™</div>
            <span>John Cena</span>
          </div>
          <div class="animation-option" data-animation="grid-scan">
            <div class="animation-icon">üì°</div>
            <span>Grid Scan</span>
          </div>
        </div>

        <div id="custom-name-input-container" style="display: none; margin-top: 15px;">
          <input type="text" class="custom-name-input" id="custom-name-input" placeholder="Enter your name for animation..." maxlength="15">
          <button class="btn" onclick="activateCustomNameAnimation()" style="margin-top: 10px; padding: 10px 20px;">Activate</button>
        </div>
      </div>
      
      <div class="animation-controls">
        <button class="close-animation-btn" onclick="closeAnimationSelector()">‚úï Close</button>
        <button class="submit-animation-btn" onclick="submitAnimationSelection()">‚úÖ Apply Animation</button>
      </div>
    </div>
  </div>

  <!-- Comedy Club Modal - with ULTRA FUNNY JOKES -->
  <div id="comedy-modal" class="comedy-modal">
    <div class="comedy-card">
      <h2><i class="fas fa-laugh-squint"></i> ULTRA COMEDY CLUB</h2>
      <div class="joke-display" id="joke-display">ü§£ Click "New Joke" for ultimate laughter!</div>
      
      <div class="comedy-controls">
        <button class="new-joke-btn" onclick="getNewJoke()"><i class="fas fa-random"></i> New Joke</button>
        <button class="share-joke-btn" onclick="shareJokeToChat()"><i class="fas fa-share-alt"></i> Share in Chat</button>
        <button class="close-comedy-btn" onclick="closeComedyClub()"><i class="fas fa-times"></i> Close</button>
      </div>

      <div class="joke-stats">
        <span><i class="fas fa-dice-d6"></i> <span id="joke-count">0</span> Jokes Told</span>
      </div>

      <div class="add-joke-section">
        <h4><i class="fas fa-pen-fancy"></i> Add Your Own Joke</h4>
        <input type="text" class="add-joke-input" id="new-joke-input" placeholder="Write a funny joke...">
        <button class="submit-joke-btn" onclick="addNewJoke()"><i class="fas fa-plus-circle"></i> Submit Joke</button>
      </div>
    </div>
  </div>

  <!-- Join modal - Google Login Button Added Here -->
  <div id="join-modal" class="join-modal">
    <div class="join-card">
      <h2>Join Chat Hook</h2>
      <form id="join-form">
        <input id="join-name" type="text" placeholder="Your name" required />
        <select id="join-gender" required>
          <option value="">Select gender</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
          <option value="Other">Other</option>
        </select>
        <select id="join-region" required>
          <option value="">Select Country / Region</option>
          <option value="India">India</option>
          <option value="United States">United States</option>
          <option value="United Kingdom">United Kingdom</option>
          <option value="Canada">Canada</option>
          <option value="Australia">Australia</option>
          <option value="Germany">Germany</option>
          <option value="France">France</option>
          <option value="Japan">Japan</option>
          <option value="China">China</option>
          <option value="Brazil">Brazil</option>
          <option value="Other">Other</option>
        </select>

        <!-- ===== GOOGLE LOGIN BUTTON - ADDED HERE ===== -->
        <div class="google-login-container">
          <button type="button" class="google-login-btn" onclick="signInWithGoogle()">
            <i class="fab fa-google"></i> Login with Google
          </button>
        </div>

        <button type="submit">Join Chat</button>
      </form>
    </div>
  </div>

  <!-- Socket.IO connection script -->
  <script>
    // Socket.IO connection with error handling
    let socket;
    try {
      socket = io("https://chat-hook-1.onrender.com", {
        transports: ["websocket", "polling"]
      });
    } catch (error) {
      // Fallback: Create a mock socket object to prevent further errors
      socket = {
        emit: function() { },
        on: function() { }
      };
    }

    const form = document.getElementById('send-container');
    const messageInput = document.getElementById('messageInp');
    const messageContainer = document.getElementById('message-container');
    const userAvatar = document.getElementById('userAvatar');

    let currentUser = { name: '', gender: '', region: '', profilePicture: '', id: '' };
    let currentJoke = '';
    let jokeCount = 0;
    let likeCount = 0;
    let currentAnimation = 'default';
    let selectedAnimation = 'default';
    let onlineUsers = [];
    let privateChatWith = null;
    let privateMessages = {};
    let unreadCount = 0;
    let selectedUserForModal = null;

    // ULTRA FUNNY JOKES DATABASE (50+ unique jokes)
    const jokesDatabase = [
      // Technology jokes
      "Why do programmers prefer dark mode? Because light attracts bugs! üêõ",
      "Why did the developer go broke? Because he used up all his cache! üí∏",
      "What's a computer's favorite beat? An algorithm! üéµ",
      "Why was the JavaScript developer sad? He didn't know how to 'null' his feelings! üò¢",
      "How many programmers does it take to change a light bulb? None, that's a hardware problem! üí°",
      
      // Animal jokes
      "What do you call a bear with no teeth? A gummy bear! üêª",
      "Why don't scientists trust atoms? Because they make up everything! ‚öõÔ∏è",
      "What do you call a sleeping bull? A bulldozer! üêÇ",
      "Why did the scarecrow win an award? He was outstanding in his field! üåæ",
      "What do you call a fish wearing a bowtie? Sofishticated! üê†",
      
      // Food jokes
      "Why did the tomato turn red? Because it saw the salad dressing! üçÖ",
      "What do you call a fake noodle? An impasta! üçù",
      "Why don't eggs tell jokes? They'd crack each other up! ü•ö",
      "What do you call cheese that isn't yours? Nacho cheese! üßÄ",
      "Why did the coffee file a police report? It got mugged! ‚òï",
      
      // School jokes
      "Why did the math book look so sad? Because it had too many problems! üìö",
      "What do you call a pencil with two erasers? Pointless! ‚úèÔ∏è",
      "Why was the equalizer so humble? Because it knew when to balance things out! ‚öñÔ∏è",
      "What did the triangle say to the circle? You're pointless! üî∫",
      "Why did the student eat his homework? Because the teacher said it was a piece of cake! üìù",
      
      // Medical jokes
      "Why did the doctor get arrested? He had too many patients! üë®‚Äç‚öïÔ∏è",
      "What do you call a sick kangaroo? A illie! ü¶ò",
      "Why don't skeletons fight each other? They don't have the guts! üíÄ",
      "What do you call a doctor who fixes websites? A URLologist! üåê",
      "Why did the nurse need a red pen at work? In case she needed to draw blood! üíâ",
      
      // Relationship jokes
      "Why did the couple get married in a database? They had a strong connection! üíë",
      "What do you call a boyfriend who's always cold? A brrr-friend! ‚ùÑÔ∏è",
      "Why don't scientists date atoms? Because they make negative ions! ‚ö°",
      "What did the left eye say to the right eye? Between us, something smells! üëÄ",
      "Why did the couple break up? Because they had no chemistry! üß™",
      
      // Music jokes
      "Why did the musician get arrested? He got into treble! üéµ",
      "What do you call a sleeping musician? A rockstar! üé∏",
      "Why did the piano go to jail? Because it was charged with assault! üéπ",
      "What's a ghost's favorite music? Soul music! üëª",
      "Why did the singer climb a ladder? To reach the high notes! üé§",
      
      // Work jokes
      "Why did the employee get fired from the calendar factory? He took a day off! üìÖ",
      "What do you call a boss who's always sleeping? A nap-tain! üëî",
      "Why did the computer go to work? It had Excel-lent skills! üìä",
      "What do you call a meeting with no purpose? A pointless gathering! ü™ë",
      "Why did the worker get promoted? He knew how to think outside the box! üì¶",
      
      // Holiday jokes
      "Why did Santa go to therapy? Because he had low elf-esteem! üéÖ",
      "What do you call a snowman with a suntan? A puddle! ‚õÑ",
      "Why did the turkey join the band? Because it had drumsticks! ü¶É",
      "What do you call a ghost's favorite dessert? Boo-berry pie! üëª",
      "Why did the pumpkin cross the road? To get to the pumpkin patch! üéÉ",
      
      // Dad jokes
      "I'm reading a book on anti-gravity. It's impossible to put down! üìñ",
      "What do you call a factory that sells passable products? A satisfactory! üè≠",
      "Why did the bicycle fall over? Because it was two tired! üö≤",
      "What do you call a can opener that doesn't work? A can't opener! ü•´",
      "Why did the cookie go to the doctor? Because it felt crumbly! üç™",
      
      // Random hilarious
      "What do you call a pig that does karate? A pork chop! üê∑",
      "Why did the frog call his insurance company? He had a jump in his car! üê∏",
      "What do you call a cow with no legs? Ground beef! üêÆ",
      "Why did the chicken go to the s√©ance? To talk to the other side! üêî",
      "What do you call a bear caught in the rain? A drizzly bear! üêª",
      
      // Extra funny
      "Why don't scientists trust stairs? Because they're always up to something! ü™ú",
      "What do you call a fish with no eyes? A fsh! üêü",
      "Why did the picture go to jail? Because it was framed! üñºÔ∏è",
      "What do you call a belt made of watches? A waist of time! ‚è∞",
      "Why did the golfer wear two pairs of pants? In case he got a hole in one! ‚õ≥"
    ];

    // Grid Scan Animation
    function createGridScanAnimation() {
      const container = document.getElementById('grid-scan-animation');
      const canvasContainer = container.querySelector('.grid-scan-canvas-container');
      
      // Clear previous canvas
      canvasContainer.innerHTML = '';
      
      // Create Three.js scene for GridScan
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
      const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
      
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setClearColor(0x000000, 0);
      canvasContainer.appendChild(renderer.domElement);
      
      // Create grid geometry
      const gridSize = 20;
      const gridDivisions = 20;
      const gridHelper = new THREE.GridHelper(gridSize, gridDivisions, 0x392e4e, 0x392e4e);
      scene.add(gridHelper);
      
      // Create scan effect
      const scanGeometry = new THREE.PlaneGeometry(gridSize, 0.5);
      const scanMaterial = new THREE.MeshBasicMaterial({
        color: 0xFF9FFC,
        transparent: true,
        opacity: 0.4,
        side: THREE.DoubleSide
      });
      const scanPlane = new THREE.Mesh(scanGeometry, scanMaterial);
      scanPlane.rotation.x = Math.PI / 2;
      scene.add(scanPlane);
      
      // Position camera
      camera.position.set(0, 10, 10);
      camera.lookAt(0, 0, 0);
      
      // Animation variables
      let scanPosition = -gridSize / 2;
      const scanSpeed = 2;
      let time = 0;
      
      // Store references for cleanup
      container._gridScan = {
        scene: scene,
        camera: camera,
        renderer: renderer,
        scanPlane: scanPlane,
        animationId: null
      };
      
      // Animation loop
      function animate() {
        const animationId = requestAnimationFrame(animate);
        container._gridScan.animationId = animationId;
        
        time += 0.016; // ~60fps
        
        // Update scan position
        scanPosition += scanSpeed * 0.016;
        if (scanPosition > gridSize / 2) {
          scanPosition = -gridSize / 2;
        }
        scanPlane.position.z = scanPosition;
        
        // Pulsing opacity effect
        scanMaterial.opacity = 0.3 + 0.2 * Math.sin(time * 2);
        
        // Rotate grid slowly
        gridHelper.rotation.y = time * 0.1;
        
        renderer.render(scene, camera);
      }
      
      animate();
      
      // Handle window resize
      function handleResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      }
      
      window.addEventListener('resize', handleResize);
      container._gridScan.handleResize = handleResize;
    }

    // Cleanup function for GridScan
    function cleanupGridScanAnimation() {
      const container = document.getElementById('grid-scan-animation');
      if (container._gridScan) {
        const { animationId, renderer, scene, handleResize } = container._gridScan;
        
        if (animationId) {
          cancelAnimationFrame(animationId);
        }
        
        if (handleResize) {
          window.removeEventListener('resize', handleResize);
        }
        
        // Dispose of Three.js resources
        scene.traverse((object) => {
          if (object.geometry) object.geometry.dispose();
          if (object.material) {
            if (Array.isArray(object.material)) {
              object.material.forEach(material => material.dispose());
            } else {
              object.material.dispose();
            }
          }
        });
        
        if (renderer) {
          renderer.dispose();
        }
        
        delete container._gridScan;
      }
    }

    // Animation creation functions for new animations
    function createQuantumWave() {
      const container = document.getElementById('quantum-wave-animation');
      container.innerHTML = '';
      
      for (let i = 0; i < 50; i++) {
        const particle = document.createElement('div');
        particle.className = 'quantum-particle';
        particle.style.left = `${Math.random() * 100}%`;
        particle.style.top = `${Math.random() * 100}%`;
        particle.style.animationDelay = `${Math.random() * 8}s`;
        particle.style.background = getRandomColor();
        container.appendChild(particle);
      }
    }

    function createCyberGrid() {
      const container = document.getElementById('cyber-grid-animation');
      container.innerHTML = '';
      
      // Create horizontal grid lines
      for (let i = 0; i < 20; i++) {
        const line = document.createElement('div');
        line.className = 'cyber-line horizontal';
        line.style.top = `${i * 5}%`;
        line.style.animationDelay = `${i * 0.15}s`;
        container.appendChild(line);
      }
      
      // Create vertical grid lines
      for (let i = 0; i < 20; i++) {
        const line = document.createElement('div');
        line.className = 'cyber-line vertical';
        line.style.left = `${i * 5}%`;
        line.style.animationDelay = `${i * 0.15}s`;
        container.appendChild(line);
      }
    }

    function createAurora() {
      const container = document.getElementById('aurora-animation');
      container.innerHTML = '';
      
      for (let i = 0; i < 3; i++) {
        const layer = document.createElement('div');
        layer.className = 'aurora-layer';
        container.appendChild(layer);
      }
    }

    function createMatrixRain() {
      const container = document.getElementById('matrix-animation');
      container.innerHTML = '';
      
      const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789$#@!%^&*()';
      
      for (let i = 0; i < 50; i++) {
        const column = document.createElement('div');
        column.className = 'matrix-column';
        column.style.left = `${Math.random() * 100}%`;
        column.style.animationDuration = `${Math.random() * 5 + 3}s`;
        column.style.animationDelay = `${Math.random() * 5}s`;
        
        for (let j = 0; j < 20; j++) {
          const char = document.createElement('div');
          char.textContent = characters.charAt(Math.floor(Math.random() * characters.length));
          char.style.opacity = Math.random();
          column.appendChild(char);
        }
        
        container.appendChild(column);
      }
    }

    function createFireworks() {
      const container = document.getElementById('fireworks-animation');
      container.innerHTML = '';
      
      for (let i = 0; i < 10; i++) {
        setTimeout(() => {
          const firework = document.createElement('div');
          firework.className = 'firework';
          firework.style.left = `${Math.random() * 100}%`;
          firework.style.bottom = '0';
          firework.style.background = getRandomColor();
          firework.style.animationDelay = `${Math.random() * 3}s`;
          container.appendChild(firework);
          
          // Create explosion
          setTimeout(() => {
            for (let j = 0; j < 30; j++) {
              const particle = document.createElement('div');
              particle.className = 'firework-particle';
              particle.style.left = firework.style.left;
              particle.style.bottom = firework.style.bottom;
              particle.style.background = getRandomColor();
              particle.style.setProperty('--tx', `${Math.random() * 100 - 50}px`);
              particle.style.setProperty('--ty', `${Math.random() * 100 - 50}px`);
              container.appendChild(particle);
              
              setTimeout(() => {
                if (container.contains(particle)) container.removeChild(particle);
              }, 1500);
            }
            
            setTimeout(() => {
              if (container.contains(firework)) container.removeChild(firework);
            }, 3000);
        }, 1500);
        }, i * 1000);
      }
    }

    function createBubbleUniverse() {
      const container = document.getElementById('bubble-universe-animation');
      container.innerHTML = '';
      
      for (let i = 0; i < 20; i++) {
        const bubble = document.createElement('div');
        bubble.className = 'bubble';
        bubble.style.width = `${Math.random() * 100 + 50}px`;
        bubble.style.height = bubble.style.width;
        bubble.style.left = `${Math.random() * 100}%`;
        bubble.style.top = `${Math.random() * 100}%`;
        bubble.style.animationDuration = `${Math.random() * 10 + 10}s`;
        bubble.style.animationDelay = `${Math.random() * 5}s`;
        bubble.style.borderColor = getRandomColor();
        container.appendChild(bubble);
      }
    }

    function createFractalAnimation() {
      const container = document.getElementById('fractal-animation');
      container.innerHTML = '';
      
      for (let i = 0; i < 3; i++) {
        const shape = document.createElement('div');
        shape.className = 'fractal-shape';
        container.appendChild(shape);
      }
    }

    function createLiquidMetal() {
      const container = document.getElementById('liquid-metal-animation');
      container.innerHTML = '';
      
      for (let i = 0; i < 5; i++) {
        const blob = document.createElement('div');
        blob.className = 'metal-blob';
        blob.style.width = `${Math.random() * 200 + 100}px`;
        blob.style.height = blob.style.width;
        blob.style.left = `${Math.random() * 100}%`;
        blob.style.top = `${Math.random() * 100}%`;
        blob.style.animationDelay = `${Math.random() * 10}s`;
        container.appendChild(blob);
      }
    }

    function createNebula() {
      const container = document.getElementById('nebula-animation');
      container.innerHTML = '';
      
      for (let i = 0; i < 3; i++) {
        const cloud = document.createElement('div');
        cloud.className = 'nebula-cloud';
        container.appendChild(cloud);
      }
    }

    function createCrystalGrowth() {
      const container = document.getElementById('crystal-animation');
      container.innerHTML = '';
      
      for (let i = 0; i < 15; i++) {
        const crystal = document.createElement('div');
        crystal.className = 'crystal';
        crystal.style.width = `${Math.random() * 80 + 20}px`;
        crystal.style.height = crystal.style.width;
        crystal.style.left = `${Math.random() * 100}%`;
        crystal.style.top = `${Math.random() * 100}%`;
        crystal.style.animationDelay = `${Math.random() * 8}s`;
        crystal.style.background = `linear-gradient(45deg, transparent, ${getRandomColor()}, transparent)`;
        container.appendChild(crystal);
      }
    }

    function createSolarFlare() {
      const container = document.getElementById('solar-flare-animation');
      container.innerHTML = '';
      
      // Create solar center
      const center = document.createElement('div');
      center.className = 'solar-center';
      container.appendChild(center);
      
      // Create flares
      for (let i = 0; i < 8; i++) {
        const flare = document.createElement('div');
        flare.className = 'solar-flare';
        flare.style.animationDelay = `${i * 0.5}s`;
        container.appendChild(flare);
      }
    }

    function createBinaryRain() {
      const container = document.getElementById('binary-rain-animation');
      container.innerHTML = '';
      
      for (let i = 0; i < 40; i++) {
        const digit = document.createElement('div');
        digit.className = 'binary-digit';
        digit.textContent = Math.random() > 0.5 ? '1' : '0';
        digit.style.left = `${Math.random() * 100}%`;
        digit.style.animationDuration = `${Math.random() * 5 + 3}s`;
        digit.style.animationDelay = `${Math.random() * 5}s`;
        container.appendChild(digit);
      }
    }

    function createPsychedelicSwirl() {
      // This animation uses CSS only, no JS initialization needed
    }

    function createMagneticField() {
      const container = document.getElementById('magnetic-field-animation');
      container.innerHTML = '';
      
      for (let i = 0; i < 20; i++) {
        const line = document.createElement('div');
        line.className = 'magnetic-line';
        line.style.left = `${i * 5}%`;
        line.style.animationDelay = `${i * 0.3}s`;
        line.style.background = `linear-gradient(to bottom, transparent, ${getRandomColor()}, transparent)`;
        container.appendChild(line);
      }
    }

    function createGlitchEffect() {
      const container = document.getElementById('glitch-animation');
      container.innerHTML = '';
      
      for (let i = 0; i < 2; i++) {
        const layer = document.createElement('div');
        layer.className = 'glitch-layer';
        container.appendChild(layer);
      }
    }

    function createHologramGrid() {
      const container = document.getElementById('hologram-grid-animation');
      container.innerHTML = '';
      
      // Create horizontal grid lines
      for (let i = 0; i < 15; i++) {
        const line = document.createElement('div');
        line.className = 'hologram-line horizontal';
        line.style.top = `${i * 7}%`;
        line.style.animationDelay = `${i * 0.2}s`;
        container.appendChild(line);
      }
      
      // Create vertical grid lines
      for (let i = 0; i < 15; i++) {
        const line = document.createElement('div');
        line.className = 'hologram-line vertical';
        line.style.left = `${i * 7}%`;
        line.style.animationDelay = `${i * 0.2}s`;
        container.appendChild(line);
      }
    }

    function createParticleStorm() {
      const container = document.getElementById('particle-storm-animation');
      container.innerHTML = '';
      
      for (let i = 0; i < 100; i++) {
        const particle = document.createElement('div');
        particle.className = 'storm-particle';
        particle.style.left = `${Math.random() * 100}%`;
        particle.style.top = `${Math.random() * 100}%`;
        particle.style.animationDuration = `${Math.random() * 3 + 2}s`;
        particle.style.animationDelay = `${Math.random() * 5}s`;
        particle.style.setProperty('--tx', `${Math.random() * 200 - 100}px`);
        particle.style.setProperty('--ty', `${Math.random() * 200 - 100}px`);
        particle.style.background = getRandomColor();
        container.appendChild(particle);
      }
    }

    function createDataStream() {
      const container = document.getElementById('data-stream-animation');
      container.innerHTML = '';
      
      // Create nodes
      const nodes = [];
      for (let i = 0; i < 10; i++) {
        const node = document.createElement('div');
        node.className = 'data-node';
        node.style.left = `${Math.random() * 100}%`;
        node.style.top = `${Math.random() * 100}%`;
        node.style.animationDelay = `${Math.random() * 2}s`;
        container.appendChild(node);
        nodes.push(node);
      }
      
      // Create connections between nodes
      for (let i = 0; i < nodes.length; i++) {
        for (let j = i + 1; j < nodes.length; j++) {
          if (Math.random() > 0.7) { // Randomly connect nodes
            const connection = document.createElement('div');
            connection.className = 'data-connection';
            
            const node1 = nodes[i];
            const node2 = nodes[j];
            
            const x1 = parseFloat(node1.style.left);
            const y1 = parseFloat(node1.style.top);
            const x2 = parseFloat(node2.style.left);
            const y2 = parseFloat(node2.style.top);
            
            const distance = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
            const angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;
            
            connection.style.width = `${distance}%`;
            connection.style.left = node1.style.left;
            connection.style.top = node1.style.top;
            connection.style.transform = `rotate(${angle}deg)`;
            connection.style.animationDelay = `${Math.random() * 3}s`;
            
            container.appendChild(connection);
          }
        }
      }
    }

    function createCosmicStrings() {
      const container = document.getElementById('cosmic-strings-animation');
      container.innerHTML = '';
      
      for (let i = 0; i < 15; i++) {
        const string = document.createElement('div');
        string.className = 'cosmic-string';
        string.style.left = `${Math.random() * 100}%`;
        string.style.animationDelay = `${Math.random() * 8}s`;
        string.style.background = `linear-gradient(to bottom, transparent, ${getRandomColor()}, transparent)`;
        container.appendChild(string);
      }
    }

    function createTimeVortex() {
      const container = document.getElementById('time-vortex-animation');
      container.innerHTML = '';
      
      for (let i = 0; i < 3; i++) {
        const ring = document.createElement('div');
        ring.className = 'vortex-ring';
        container.appendChild(ring);
      }
    }

    // Helper function to get random colors
    function getRandomColor() {
      const colors = ['#0cf', '#8a2be2', '#00ff88', '#ff6b6b', '#feca57', '#48dbfb', '#ff9ff3', '#54a0ff', '#5f27cd', '#00d2d3'];
      return colors[Math.floor(Math.random() * colors.length)];
    }

    // Enhanced John Cena Animation
    function createEnhancedJohnCenaAnimation() {
      const container = document.getElementById('john-cena-animation');
      const entranceAnimation = container.querySelector('.cena-entrance-animation');
      const crowdContainer = container.querySelector('.cena-crowd-cheer');
      
      // Clear previous crowd
      crowdContainer.innerHTML = '';
      
      // Create crowd
      for (let i = 0; i < 30; i++) {
        const person = document.createElement('div');
        person.className = 'cena-crowd-person';
        person.style.left = `${Math.random() * 100}%`;
        person.style.animationDelay = `${Math.random() * 2}s`;
        crowdContainer.appendChild(person);
      }
      
      // Auto-hide after 8 seconds
      setTimeout(() => {
        entranceAnimation.style.display = 'none';
      }, 8000);
    }

    // Enhanced Join Board with Animations
    function enhanceJoinBoard() {
      const joinInputs = document.querySelectorAll('.join-card input, .join-card select');
      const joinButton = document.querySelector('.join-card button[type="submit"]');
      
      // Add focus animations to inputs
      joinInputs.forEach(input => {
        input.classList.add('join-input-focus');
        
        input.addEventListener('focus', function() {
          this.parentElement.style.transform = 'translateY(-5px)';
        });
        
        input.addEventListener('blur', function() {
          this.parentElement.style.transform = 'translateY(0)';
        });
      });
      
      // Add pulse animation to submit button
      joinButton.classList.add('join-submit-pulse');
      
      // Add form submission animation
      const joinForm = document.getElementById('join-form');
      joinForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Validate form
        const name = document.getElementById('join-name').value.trim();
        const gender = document.getElementById('join-gender').value;
        const region = document.getElementById('join-region').value;
        
        if (!name || !gender || !region) {
          // Shake animation for validation error
          joinForm.style.animation = 'shake 0.5s';
          setTimeout(() => {
            joinForm.style.animation = '';
          }, 500);
          return;
        }
        
        // Show success animation
        showJoinSuccessAnimation(name);
      });
    }
    
    function showJoinSuccessAnimation(userName) {
      const successAnimation = document.getElementById('join-success-animation');
      const successMessage = successAnimation.querySelector('.success-message');
      
      successMessage.textContent = `Welcome ${userName} to Chat Hook!`;
      successAnimation.style.display = 'flex';
      
      // Hide after 3 seconds and proceed with actual join
      setTimeout(() => {
        successAnimation.style.display = 'none';
        // Continue with the actual join process
        processJoinForm();
      }, 3000);
    }
    
    function processJoinForm() {
      // Original join form processing code
      const joinModal = document.getElementById('join-modal');
      const joinForm = document.getElementById('join-form');
      const joinName = document.getElementById('join-name');
      const joinGender = document.getElementById('join-gender');
      const joinRegion = document.getElementById('join-region');
      
      const name = joinName.value.trim();
      const gender = joinGender.value;
      const region = joinRegion.value;

      if (!name || !gender || !region) {
        alert('Please fill all fields!');
        return;
      }

      // Update user avatar
      updateUserAvatar(name, currentUser.profilePicture);

      currentUser = { 
        name: name, 
        gender: gender, 
        region: region, 
        profilePicture: currentUser.profilePicture || '',
        id: Date.now().toString() + Math.random().toString(36).substr(2, 9)
      };

      socket.emit('new-user-joined', currentUser);
      joinModal.style.display = 'none';
      appendSystemMessage(`You joined the chat as ${name}`);
    }

    // Profile Picture Upload Functions
    function handleProfilePicUpload(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const imageData = e.target.result;
          
          // Update preview in profile panel
          const preview = document.getElementById('profilePicPreview');
          preview.innerHTML = `<img src="${imageData}" alt="Profile">`;
          
          // Update current user's profile picture
          currentUser.profilePicture = imageData;
          
          // Update main user avatar
          updateUserAvatar(currentUser.name, imageData);
          
          // Show confirmation
          showConfirmationMessage('Profile picture updated!', 'success');
        };
        reader.readAsDataURL(file);
      }
    }

    function updateUserAvatar(name, imageData) {
      const userAvatar = document.getElementById('userAvatar');
      if (imageData) {
        userAvatar.innerHTML = `<img src="${imageData}" alt="${name}">`;
      } else {
        userAvatar.innerHTML = name.charAt(0).toUpperCase();
      }
    }

    // Animation functions
    function openAnimationSelector() {
      document.getElementById('animation-modal').style.display = 'flex';
      // Reset to current animation when opening
      selectedAnimation = currentAnimation;
      updateAnimationSelection();
    }

    function closeAnimationSelector() {
      document.getElementById('animation-modal').style.display = 'none';
      document.getElementById('custom-name-input-container').style.display = 'none';
    }

    function updateAnimationSelection() {
      // Update active state in selector
      document.querySelectorAll('.animation-option').forEach(option => {
        option.classList.remove('active');
        if (option.dataset.animation === selectedAnimation) {
          option.classList.add('active');
        }
      });
      
      // Special handling for custom name animation
      if (selectedAnimation === 'custom-name') {
        document.getElementById('custom-name-input-container').style.display = 'block';
      } else {
        document.getElementById('custom-name-input-container').style.display = 'none';
      }
    }

    function selectAnimation(animationType) {
      selectedAnimation = animationType;
      updateAnimationSelection();
    }

    function submitAnimationSelection() {
      if (selectedAnimation === 'custom-name') {
        const nameInput = document.getElementById('custom-name-input');
        const name = nameInput.value.trim();
        
        if (!name) {
          alert('Please enter your name first for the custom name animation!');
          return;
        }
        
        createCustomNameAnimation(name);
      }
      
      changeAnimation(selectedAnimation);
      showConfirmationMessage(`Animation changed to ${getAnimationName(selectedAnimation)}!`);
      closeAnimationSelector();
    }

    function getAnimationName(animationType) {
      const names = {
        'default': 'Floating Shapes',
        'quantum-wave': 'Quantum Wave',
        'cyber-grid': 'Cyber Grid',
        'aurora': 'Aurora Borealis',
        'matrix': 'Matrix Code',
        'fireworks': 'Fireworks',
        'bubble-universe': 'Bubble Universe',
        'fractal': 'Geometric Fractal',
        'liquid-metal': 'Liquid Metal',
        'nebula': 'Nebula Cloud',
        'crystal': 'Crystal Growth',
        'solar-flare': 'Solar Flare',
        'binary-rain': 'Binary Rain',
        'psychedelic': 'Psychedelic Swirl',
        'magnetic-field': 'Magnetic Field',
        'glitch': 'Glitch Effect',
        'hologram-grid': 'Hologram Grid',
        'particle-storm': 'Particle Storm',
        'data-stream': 'Data Stream',
        'cosmic-strings': 'Cosmic Strings',
        'time-vortex': 'Time Vortex',
        'neon-grid': 'Neon Grid',
        'liquid-rainbow': 'Liquid Rainbow',
        'cosmic-energy': 'Cosmic Energy',
        'holographic-prism': 'Holographic Prism',
        'digital-rain': 'Digital Rain',
        'galaxy': 'Particle Galaxy',
        'chat-hook': 'Chat Hook Logo',
        'custom-name': 'Custom Name',
        'john-cena': 'John Cena',
        'grid-scan': 'Grid Scan'
      };
      return names[animationType] || animationType;
    }

    function showConfirmationMessage(message) {
      const confirmation = document.createElement('div');
      confirmation.className = 'confirmation-message';
      confirmation.textContent = message;
      document.body.appendChild(confirmation);
      
      setTimeout(() => {
        confirmation.remove();
      }, 2000);
    }

    function changeAnimation(animationType) {
      // Clean up previous animation if it's GridScan
      if (currentAnimation === 'grid-scan') {
        cleanupGridScanAnimation();
      }
      
      // Hide all animations
      const allAnimations = document.querySelectorAll('.animation-container, .floating-shapes, .neon-grid, .liquid-rainbow, .cosmic-energy, .holographic-prism, .digital-rain, .particle-galaxy, .chat-hook-animation, .custom-name-animation, .john-cena-animation');
      allAnimations.forEach(anim => {
        anim.style.display = 'none';
      });
      
      // Show selected animation
      document.getElementById(`${animationType}-animation`).style.display = 'block';
      
      currentAnimation = animationType;
      
      // Initialize specific animations
      const animationInitializers = {
        'quantum-wave': createQuantumWave,
        'cyber-grid': createCyberGrid,
        'aurora': createAurora,
        'matrix': createMatrixRain,
        'fireworks': createFireworks,
        'bubble-universe': createBubbleUniverse,
        'fractal': createFractalAnimation,
        'liquid-metal': createLiquidMetal,
        'nebula': createNebula,
        'crystal': createCrystalGrowth,
        'solar-flare': createSolarFlare,
        'binary-rain': createBinaryRain,
        'psychedelic': createPsychedelicSwirl,
        'magnetic-field': createMagneticField,
        'glitch': createGlitchEffect,
        'hologram-grid': createHologramGrid,
        'particle-storm': createParticleStorm,
        'data-stream': createDataStream,
        'cosmic-strings': createCosmicStrings,
        'time-vortex': createTimeVortex,
        'digital-rain': createDigitalRain,
        'galaxy': createGalaxyParticles,
        'chat-hook': createChatHookAnimation,
        'neon-grid': createNeonGrid,
        'cosmic-energy': createCosmicEnergy,
        'holographic-prism': createHolographicPrism,
        'john-cena': createEnhancedJohnCenaAnimation,
        'grid-scan': createGridScanAnimation
      };
      
      if (animationInitializers[animationType]) {
        animationInitializers[animationType]();
      }
    }

    function createDigitalRain() {
      const rainContainer = document.getElementById('digital-rain-animation');
      rainContainer.innerHTML = '';
      
      const characters = '01„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥„Çµ„Ç∑„Çπ„Çª„ÇΩ„Çø„ÉÅ„ÉÑ„ÉÜ„Éà„Éä„Éã„Éå„Éç„Éé„Éè„Éí„Éï„Éò„Éõ„Éû„Éü„É†„É°„É¢„É§„É¶„É®„É©„É™„É´„É¨„É≠„ÉØ„É≤„É≥';
      
      for (let i = 0; i < 50; i++) {
        const column = document.createElement('div');
        column.className = 'rain-column';
        column.style.left = `${Math.random() * 100}%`;
        column.style.animationDuration = `${Math.random() * 5 + 5}s`;
        column.style.animationDelay = `${Math.random() * 5}s`;
        
        // Create multiple characters in the column
        for (let j = 0; j < 20; j++) {
          const char = document.createElement('div');
          char.textContent = characters.charAt(Math.floor(Math.random() * characters.length));
          char.style.opacity = Math.random();
          column.appendChild(char);
        }
        
        rainContainer.appendChild(column);
      }
    }

    function createGalaxyParticles() {
      const galaxyContainer = document.getElementById('galaxy-animation');
      // Clear existing particles
      const existingParticles = galaxyContainer.querySelectorAll('.galaxy-particle');
      existingParticles.forEach(particle => particle.remove());
      
      // Create new particles
      for (let i = 0; i < 100; i++) {
        const particle = document.createElement('div');
        particle.className = 'galaxy-particle';
        particle.style.animationDuration = `${Math.random() * 20 + 10}s`;
        particle.style.animationDelay = `${Math.random() * 5}s`;
        galaxyContainer.appendChild(particle);
      }
    }

    function createChatHookAnimation() {
      const container = document.getElementById('chat-hook-animation');
      container.innerHTML = '';
      
      // Create floating logo particles
      for (let i = 0; i < 30; i++) {
        const particle = document.createElement('div');
        particle.className = 'logo-particle';
        particle.textContent = 'üí¨';
        particle.style.left = `${Math.random() * 100}%`;
        particle.style.animationDuration = `${Math.random() * 10 + 10}s`;
        particle.style.animationDelay = `${Math.random() * 5}s`;
        container.appendChild(particle);
      }
      
      // Create hook elements
      for (let i = 0; i < 5; i++) {
        const hook = document.createElement('div');
        hook.className = 'hook-element';
        hook.style.left = `${Math.random() * 100}%`;
        hook.style.top = `${Math.random() * 100}%`;
        hook.style.animationDelay = `${Math.random() * 3}s`;
        container.appendChild(hook);
      }
    }

    // NEW ANIMATION CREATION FUNCTIONS
    function createNeonGrid() {
      const gridContainer = document.getElementById('neon-grid-animation');
      gridContainer.innerHTML = '';
      
      // Create horizontal grid lines
      for (let i = 0; i < 20; i++) {
        const line = document.createElement('div');
        line.className = 'grid-line horizontal';
        line.style.top = `${i * 5}%`;
        line.style.animationDelay = `${i * 0.2}s`;
        gridContainer.appendChild(line);
      }
      
      // Create vertical grid lines
      for (let i = 0; i < 20; i++) {
        const line = document.createElement('div');
        line.className = 'grid-line vertical';
        line.style.left = `${i * 5}%`;
        line.style.animationDelay = `${i * 0.2}s`;
        gridContainer.appendChild(line);
      }
    }

    function createCosmicEnergy() {
      const energyContainer = document.getElementById('cosmic-energy-animation');
      energyContainer.innerHTML = '';
      
      // Create energy waves
      for (let i = 0; i < 4; i++) {
        const wave = document.createElement('div');
        wave.className = 'energy-wave';
        energyContainer.appendChild(wave);
      }
    }

    function createHolographicPrism() {
      const prismContainer = document.getElementById('holographic-prism-animation');
      prismContainer.innerHTML = '';
      
      // Create prism beams
      for (let i = 0; i < 8; i++) {
        const beam = document.createElement('div');
        beam.className = 'prism-beam';
        beam.style.animationDuration = `${Math.random() * 10 + 10}s`;
        beam.style.animationDelay = `${i * 1.25}s`;
        prismContainer.appendChild(beam);
      }
    }

    function activateCustomNameAnimation() {
      const nameInput = document.getElementById('custom-name-input');
      const name = nameInput.value.trim();
      
      if (!name) {
        alert('Please enter your name first!');
        return;
      }
      
      createCustomNameAnimation(name);
      selectedAnimation = 'custom-name';
      updateAnimationSelection();
    }

    function createCustomNameAnimation(name) {
      const container = document.getElementById('custom-name-animation');
      container.innerHTML = '';
      
      // Create name particles
      for (let i = 0; i < name.length * 5; i++) {
        const charIndex = i % name.length;
        const particle = document.createElement('div');
        particle.className = 'name-particle';
        particle.textContent = name[charIndex];
        particle.style.left = `${Math.random() * 100}%`;
        particle.style.animationDuration = `${Math.random() * 15 + 10}s`;
        particle.style.animationDelay = `${Math.random() * 5}s`;
        particle.style.color = getRandomColor();
        particle.style.fontSize = `${Math.random() * 10 + 16}px`;
        container.appendChild(particle);
      }
      
      // Create trails
      for (let i = 0; i < 20; i++) {
        const trail = document.createElement('div');
        trail.className = 'name-trail';
        trail.style.left = `${Math.random() * 100}%`;
        trail.style.top = `${Math.random() * 100}%`;
        trail.style.animationDelay = `${Math.random() * 2}s`;
        container.appendChild(trail);
      }
      
      // Create echo effect
      for (let i = 0; i < 3; i++) {
        const echo = document.createElement('div');
        echo.className = 'name-echo';
        echo.textContent = name;
        echo.style.left = `${Math.random() * 80 + 10}%`;
        echo.style.top = `${Math.random() * 80 + 10}%`;
        echo.style.animationDelay = `${i * 1.5}s`;
        container.appendChild(echo);
      }
    }

    // Set up animation selection
    document.querySelectorAll('.animation-option').forEach(option => {
      option.addEventListener('click', () => {
        selectAnimation(option.dataset.animation);
      });
    });

    // ===== MESSAGE FUNCTIONS =====
    const appendMessage = (message, userData, isOwn = false) => {
      const messageElement = document.createElement('div');
      messageElement.className = `message ${isOwn ? 'own' : 'other'}`;
      
      // Get initial for avatar
      const initial = userData.name ? userData.name.charAt(0).toUpperCase() : '?';
      
      // Create avatar HTML with click handler
      let avatarHtml;
      if (userData.profilePicture) {
        avatarHtml = `<div class="user-avatar" onclick='openUserProfileModal(${JSON.stringify(userData).replace(/'/g, "\\'")})'><img src="${userData.profilePicture}" alt="${userData.name}"></div>`;
      } else {
        const colors = ['#0cf', '#8a2be2', '#00ff88', '#ff6b6b', '#feca57', '#48dbfb'];
        const color = userData.name ? colors[userData.name.length % colors.length] : colors[0];
        avatarHtml = `<div class="user-avatar" onclick='openUserProfileModal(${JSON.stringify(userData).replace(/'/g, "\\'")})' style="background: linear-gradient(135deg, ${color}, ${color}99);">${initial}</div>`;
      }
      
      messageElement.innerHTML = `
        <div class="message-bubble">
          <div class="message-user">
            ${avatarHtml}
            <div class="user-name" onclick='openUserProfileModal(${JSON.stringify(userData).replace(/'/g, "\\'")})'>${userData.name || 'Unknown'}</div>
          </div>
          <div class="message-content">${message}</div>
          <div class="message-meta">
            <span>${userData.gender || 'Unknown'} ‚Ä¢ ${userData.region || 'Unknown'}</span>
            <span>${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
          </div>
        </div>
      `;
      
      messageContainer.appendChild(messageElement);
      messageContainer.scrollTop = messageContainer.scrollHeight;
    };

    const appendSystemMessage = (message) => {
      const messageElement = document.createElement('div');
      messageElement.className = 'message';
      messageElement.innerHTML = `
        <div style="text-align: center; width: 100%;">
          <div style="display: inline-block; background: rgba(100, 100, 255, 0.2); color: var(--text-muted); padding: 6px 12px; border-radius: 12px; font-size: 12px;">
            ${message}
          </div>
        </div>
      `;
      messageContainer.appendChild(messageElement);
      messageContainer.scrollTop = messageContainer.scrollHeight;
    };

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const message = messageInput.value.trim();
      if (!message) return;
      
      appendMessage(message, currentUser, true);
      socket.emit('send', { message: message, user: currentUser });
      messageInput.value = '';
    });

    // ===== COMEDY CLUB FUNCTIONS =====
    function openComedyClub() { 
      document.getElementById('comedy-modal').style.display = 'flex'; 
    }
    
    function closeComedyClub() { 
      document.getElementById('comedy-modal').style.display = 'none'; 
    }

    function getNewJoke() {
      if (jokesDatabase.length === 0) return;
      const randomIndex = Math.floor(Math.random() * jokesDatabase.length);
      currentJoke = jokesDatabase[randomIndex];
      document.getElementById('joke-display').textContent = currentJoke;
      jokeCount++;
      document.getElementById('joke-count').textContent = jokeCount;
      createLaughterAnimation();
    }

    function shareJokeToChat() {
      if (currentJoke && socket && currentUser.name) {
        appendMessage(`üòÇ ${currentJoke}`, currentUser, true);
        socket.emit('send', { message: `üòÇ ${currentJoke}`, user: currentUser });
        closeComedyClub();
      } else if (!currentUser.name) {
        alert("Please join the chat first to share jokes!");
      }
    }

    function addNewJoke() {
      const newJokeInput = document.getElementById('new-joke-input');
      const newJoke = newJokeInput.value.trim();
      if (newJoke) {
        jokesDatabase.push(newJoke);
        newJokeInput.value = '';
        currentJoke = newJoke;
        document.getElementById('joke-display').textContent = currentJoke;
        jokeCount++;
        document.getElementById('joke-count').textContent = jokeCount;
        appendSystemMessage(`You added a new joke to the Comedy Club!`);
      }
    }

    function createLaughterAnimation() {
      const emojis = ['üòÇ', 'ü§£', 'üòÜ', 'üòÑ', 'üé≠', 'üëè', 'üíÄ', 'üî•'];
      const comedyCard = document.querySelector('.comedy-card');
      for (let i = 0; i < 8; i++) {
        setTimeout(() => {
          const laughter = document.createElement('div');
          laughter.className = 'laughter-animation';
          laughter.textContent = emojis[Math.floor(Math.random() * emojis.length)];
          laughter.style.left = Math.random() * 80 + 10 + '%';
          comedyCard.appendChild(laughter);
          setTimeout(() => { if (comedyCard.contains(laughter)) comedyCard.removeChild(laughter); }, 2000);
        }, i * 150);
      }
    }

    // Join modal functionality
    const joinModal = document.getElementById('join-modal');
    const joinForm = document.getElementById('join-form');
    const joinName = document.getElementById('join-name');
    const joinGender = document.getElementById('join-gender');
    const joinRegion = document.getElementById('join-region');

    // Socket event listeners
    socket.on('user-joined', (user) => { 
      appendSystemMessage(`${user.name} joined the chat`);
      // Add user to online users list
      if (!onlineUsers.find(u => u.id === user.id)) {
        onlineUsers.push(user);
        updateOnlineUsersList();
      }
    });
    
    socket.on('receive', (data) => { 
      appendMessage(data.message, data.user, false); 
    });
    
    socket.on('left', (user) => { 
      appendSystemMessage(`${user.name} left the chat`);
      // Remove user from online users list
      onlineUsers = onlineUsers.filter(u => u.id !== user.id);
      updateOnlineUsersList();
      
      // Close private chat if that user left
      if (privateChatWith && privateChatWith.id === user.id) {
        closePrivateChat();
      }
    });
    
    socket.on('connect', () => { 
      // Connection message removed
    });
    
    socket.on('disconnect', () => { 
      appendSystemMessage('Disconnected from server'); 
    });

    // ===== PROFILE PANEL FUNCTIONS =====
    function toggleProfilePanel() {
      document.getElementById('profilePanel').classList.toggle('active');
      if (currentUser.name) {
        document.getElementById('profileUsername').value = currentUser.name;
        document.getElementById('profileCountry').value = currentUser.region || 'India';
        
        // Update profile picture preview
        const preview = document.getElementById('profilePicPreview');
        if (currentUser.profilePicture) {
          preview.innerHTML = `<img src="${currentUser.profilePicture}" alt="${currentUser.name}">`;
        } else {
          preview.innerHTML = `<span id="profilePicInitial">${currentUser.name.charAt(0).toUpperCase()}</span>`;
        }
      }
    }

    function saveProfile() {
      const newName = document.getElementById('profileUsername').value.trim();
      const newCountry = document.getElementById('profileCountry').value;
      
      if (newName && currentUser) {
        currentUser.name = newName;
        currentUser.region = newCountry;
        updateUserAvatar(newName, currentUser.profilePicture);
        appendSystemMessage(`Profile updated: ${newName} from ${newCountry}`);
        showConfirmationMessage('Profile saved!');
        toggleProfilePanel();
      }
    }

    // ===== USER PROFILE MODAL FUNCTIONS =====
    function openUserProfileModal(user) {
      selectedUserForModal = user;
      
      // Update modal with user info
      const modalAvatar = document.getElementById('modalAvatar');
      if (user.profilePicture) {
        modalAvatar.innerHTML = `<img src="${user.profilePicture}" alt="${user.name}">`;
      } else {
        modalAvatar.innerHTML = `<span>${user.name.charAt(0).toUpperCase()}</span>`;
      }
      
      document.getElementById('modalUsername').textContent = user.name;
      document.getElementById('modalCountry').innerHTML = `<i class="fas fa-map-marker-alt"></i> ${user.region || 'Unknown'}`;
      
      // Set bio
      document.getElementById('modalBio').textContent = `Hey there! I'm ${user.name} from ${user.region || 'Unknown'}. Using Chat Hook!`;
      
      document.getElementById('userProfileModal').classList.add('active');
    }

    function closeUserProfileModal() {
      document.getElementById('userProfileModal').classList.remove('active');
      selectedUserForModal = null;
    }

    function openPrivateChatFromModal() {
      if (selectedUserForModal) {
        closeUserProfileModal();
        openPrivateChat(selectedUserForModal);
      }
    }

    // ===== PRIVATE CHAT FUNCTIONS =====
    function toggleOnlineUsers() {
      const list = document.getElementById('onlineUsersList');
      list.classList.toggle('active');
      
      // Update badge when opening
      if (list.classList.contains('active')) {
        unreadCount = 0;
      }
    }

    function openPrivateChat(user) {
      privateChatWith = user;
      document.getElementById('onlineUsersList').classList.remove('active');
      
      // You would need to implement private chat UI here
      alert(`Private chat with ${user.name} - Feature coming soon!`);
    }

    function closePrivateChat() {
      privateChatWith = null;
    }

    function getChatId(id1, id2) {
      return [id1, id2].sort().join('-');
    }

    // Update online users list
    function updateOnlineUsersList() {
      const container = document.getElementById('onlineUsersContainer');
      container.innerHTML = '';
      
      // Filter out current user
      const otherUsers = onlineUsers.filter(user => user.id !== currentUser.id);
      
      if (otherUsers.length === 0) {
        container.innerHTML = '<div style="padding: 15px; text-align: center; color: var(--text-muted);">No other users online</div>';
        return;
      }
      
      otherUsers.forEach(user => {
        const userDiv = document.createElement('div');
        userDiv.className = `online-user-item`;
        userDiv.onclick = () => openPrivateChat(user);
        
        const avatarDiv = document.createElement('div');
        avatarDiv.className = 'user-avatar-small';
        if (user.profilePicture) {
          avatarDiv.innerHTML = `<img src="${user.profilePicture}" alt="${user.name}">`;
        } else {
          avatarDiv.textContent = user.name.charAt(0).toUpperCase();
        }
        
        const status = document.createElement('span');
        status.className = 'online-user-status';
        
        const nameSpan = document.createElement('span');
        nameSpan.className = 'online-user-name';
        nameSpan.textContent = user.name;
        
        const msgIndicator = document.createElement('span');
        msgIndicator.className = 'online-user-message';
        msgIndicator.textContent = 'Click to chat';
        
        userDiv.appendChild(avatarDiv);
        userDiv.appendChild(status);
        userDiv.appendChild(nameSpan);
        userDiv.appendChild(msgIndicator);
        container.appendChild(userDiv);
      });
    }

    // Weather/Time update function
    function updateWeatherTime() {
      const element = document.getElementById('weatherTime');
      const now = new Date();
      const timeStr = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      const dateStr = now.toLocaleDateString();
      const weathers = ['‚òÄÔ∏è Sunny', '‚õÖ Partly Cloudy', '‚òÅÔ∏è Cloudy', 'üåßÔ∏è Rainy'];
      const randomWeather = weathers[Math.floor(Math.random() * weathers.length)];
      const temp = Math.floor(Math.random() * 15) + 20;
      element.innerHTML = `${temp}¬∞C ${randomWeather} ‚Ä¢ ${timeStr} ‚Ä¢ ${dateStr}`;
    }

    setInterval(updateWeatherTime, 60000);
    updateWeatherTime();

    // ===== GOOGLE AUTH FUNCTIONS - THESE WILL BE OVERRIDDEN BY LOGIN.JS =====
    // Placeholder function - will be replaced by login.js
    window.signInWithGoogle = function() {
      console.log("Google login function will be loaded from login.js");
    };

    // Initialize on window load
    window.addEventListener('load', () => {
      joinModal.style.display = 'flex';
      getNewJoke();
      
      // Initialize all animation types
      createQuantumWave();
      createCyberGrid();
      createAurora();
      createMatrixRain();
      createFireworks();
      createBubbleUniverse();
      createFractalAnimation();
      createLiquidMetal();
      createNebula();
      createCrystalGrowth();
      createSolarFlare();
      createBinaryRain();
      createMagneticField();
      createGlitchEffect();
      createHologramGrid();
      createParticleStorm();
      createDataStream();
      createCosmicStrings();
      createTimeVortex();
      
      // Your existing animation initializations
      createDigitalRain();
      createGalaxyParticles();
      createNeonGrid();
      createCosmicEnergy();
      createHolographicPrism();
      createEnhancedJohnCenaAnimation();
      enhanceJoinBoard();
      
      // Set default animation
      changeAnimation('default');

      // Check for existing session - this will be handled by login.js
    });
  </script>

  <!-- ===== FIREBASE AND CLIENT.JS SCRIPTS - ADDED AS REQUESTED ===== -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  <script src="client.js"></script>
</body>
</html>